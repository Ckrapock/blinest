import{g,q as x,h as A,o as t,c as b,w as d,a as e,t as l,d as v,b as o,F as w,y as k,k as y,m,r as B,u as V,L as z}from"./app.e47e5905.js";import{_ as j}from"./TextInput.a612d17f.js";import{_ as $}from"./Dropdown.c59b2b1e.js";import{C}from"./Card.96514456.js";import{d as L}from"./debounce.f308b35d.js";import{_ as N}from"./plugin-vue_export-helper.21dcd24c.js";const S={class:"text-xl font-bold"},D={key:0,class:"max-w-50 max-h-80 overflow-y-auto"},F=["src"],H={class:"mr-4"},O=["title","onClick"],T={key:0},P=["src"],R=["title","onClick"],q=e("svg",{xmlns:"http://www.w3.org/2000/svg",class:"h-6 w-6 ml-2",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor","stroke-width":"2"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M17 16l4-4m0 0l-4-4m4 4H7m6 4v1a3 3 0 01-3 3H6a3 3 0 01-3-3V7a3 3 0 013-3h4a3 3 0 013 3v1"})],-1),E={key:1,class:"my-2 text-sm text-neutral-400"},_e={__name:"ModeratorsManager",props:{room:Object},setup(a){const u=a,c=g(""),f=g(!1),h=g(null),s=x({user_id:null});A(c,L(()=>{f.value=!0,axios.get("/api/users",{params:{search:c.value}}).then(r=>{h.value=r.data.users,f.value=!1})},300));const _=r=>{s.transform(p=>({user_id:r.id})).post(`/rooms/${u.room.id}/moderators/attach`,{preserveScroll:!0})},i=r=>{s.transform(p=>({user_id:r.id})).delete(`/rooms/${u.room.id}/moderators/detach`,{preserveScroll:!0})};return(r,p)=>(t(),b(C,null,{header:d(()=>[e("h3",S,l(r.__("Moderators")),1)]),default:d(()=>[v($,{placement:"bottom-start",class:"mb-2 pb-2",onClosed:p[1]||(p[1]=n=>c.value="")},{default:d(()=>[v(j,{modelValue:c.value,"onUpdate:modelValue":p[0]||(p[0]=n=>c.value=n),"prepend-icon":"search","append-icon":"cheveron-down",loading:f.value,placeholder:r.__("Add a moderator")},null,8,["modelValue","loading","placeholder"])]),dropdown:d(()=>[h.value&&h.value.data.length?(t(),o("ul",D,[(t(!0),o(w,null,k(h.value.data,n=>(t(),o("li",{key:n.id,class:"flex items-center p-2"},[n.photo?(t(),o("img",{key:0,class:"-my-2 mr-2 block h-8 w-8 rounded-full",src:n.photo},null,8,F)):y("",!0),e("span",H,l(n.name),1),e("button",{class:"ml-auto rounded-full bg-blue-500 py-1 px-2 text-xs uppercase",title:r.__("Add"),onClick:M=>_(n)},l(r.__("Add")),9,O)]))),128))])):y("",!0)]),_:1}),a.room.moderators&&a.room.moderators.length?(t(),o("ul",T,[(t(!0),o(w,null,k(a.room.moderators,n=>(t(),o("li",{key:n.id,class:"flex items-center rounded p-3"},[n.photo?(t(),o("img",{key:0,class:"-my-2 mr-2 block h-8 w-8 rounded-full",src:n.photo},null,8,P)):y("",!0),m(" "+l(n.name)+" ",1),e("button",{class:"ml-auto text-red-500 flex",title:r.__("Remove"),onClick:M=>i(n)},[m(l(r.__("Remove"))+" ",1),q],8,R)]))),128))])):(t(),o("p",E,l(r.__("No moderator")),1))]),_:1}))}},I={},U={class:"mb-4 flex items-start rounded bg-neutral-700 text-neutral-400 p-2 text-sm"},G=e("svg",{xmlns:"http://www.w3.org/2000/svg",class:"mr-2 h-10 w-10",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor","stroke-width":"2"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M9.663 17h4.673M12 3v1m6.364 1.636l-.707.707M21 12h-1M4 12H3m3.343-5.657l-.707-.707m2.828 9.9a5 5 0 117.072 0l-.548.547A3.374 3.374 0 0014 18.469V19a2 2 0 11-4 0v-.531c0-.895-.356-1.754-.988-2.386l-.548-.547z"})],-1);function J(a,u){return t(),o("p",U,[G,B(a.$slots,"default")])}var K=N(I,[["render",J]]);const Q={class:"flex w-full items-center justify-between"},W={class:"text-xl font-bold"},X={class:"flex items-center"},Y={type:"button",class:"btn-secondary"},Z={key:0,class:"max-w-50 max-h-80 overflow-y-auto"},ee={class:"mr-4"},te=["title","onClick"],se=e("svg",{xmlns:"http://www.w3.org/2000/svg",class:"mr-1 h-6 w-6",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor","stroke-width":"2"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M13.828 10.172a4 4 0 00-5.656 0l-4 4a4 4 0 105.656 5.656l1.102-1.101m-.758-4.899a4 4 0 005.656 0l4-4a4 4 0 00-5.656-5.656l-1.1 1.1"})],-1),oe=e("br",null,null,-1),le={key:1},ae=["title","onClick"],re=e("svg",{xmlns:"http://www.w3.org/2000/svg",class:"mr-1 h-6 w-6",viewBox:"0 0 24 24"},[e("g",null,[e("path",{fill:"currentColor",d:"M17.657 14.828l-1.414-1.414L17.657 12A4 4 0 1 0 12 6.343l-1.414 1.414-1.414-1.414 1.414-1.414a6 6 0 0 1 8.485 8.485l-1.414 1.414zm-2.829 2.829l-1.414 1.414a6 6 0 1 1-8.485-8.485l1.414-1.414 1.414 1.414L6.343 12A4 4 0 1 0 12 17.657l1.414-1.414 1.414 1.414zm0-9.9l1.415 1.415-7.071 7.07-1.415-1.414 7.071-7.07zM5.775 2.293l1.932-.518L8.742 5.64l-1.931.518-1.036-3.864zm9.483 16.068l1.931-.518 1.036 3.864-1.932.518-1.035-3.864zM2.293 5.775l3.864 1.036-.518 1.931-3.864-1.035.518-1.932zm16.068 9.483l3.864 1.035-.518 1.932-3.864-1.036.518-1.931z"})])],-1),ne={key:2,class:"my-2 text-sm text-neutral-400"},pe={__name:"PlaylistsManager",props:{room:Object,playlists:Object},setup(a){const u=a,c=x({playlist_id:null}),f=s=>{c.transform(_=>({playlist_id:s.id})).post(`/rooms/${u.room.id}/playlists/attach`,{preserveScroll:!0})},h=s=>{c.transform(_=>({playlist_id:s.id})).delete(`/rooms/${u.room.id}/playlists/detach`,{preserveScroll:!0})};return(s,_)=>(t(),b(C,null,{header:d(()=>[e("div",Q,[e("h3",W,l(s.__("Playlists")),1),e("div",X,[v($,{placement:"bottom-start",class:"mr-2",onClosed:_[0]||(_[0]=i=>s.search="")},{default:d(()=>[e("button",Y,l(s.__("Attach a playlist")),1)]),dropdown:d(()=>[a.playlists&&a.playlists.length?(t(),o("ul",Z,[(t(!0),o(w,null,k(a.playlists,i=>(t(),o("li",{key:i.id,class:"flex items-center p-2"},[e("span",ee,l(i.name),1),e("button",{class:"ml-auto flex items-center rounded-full bg-blue-500 py-1 px-2 text-xs uppercase",title:s.__("Add"),onClick:r=>f(i)},[se,m(" "+l(s.__("Attach")),1)],8,te)]))),128))])):y("",!0)]),_:1}),v(V(z),{href:"/playlists/create",class:"btn-secondary"},{default:d(()=>[m(l(s.__("Create a playlist")),1)]),_:1})])])]),default:d(()=>[a.room.playlists.length?y("",!0):(t(),b(K,{key:0},{default:d(()=>[m(l(s.__("The room must be associated with one or more playlists to work.")),1),oe,m(" "+l(s.__("It is possible to use the official Blinest playlists or to create your own playlists.")),1)]),_:1})),a.room.playlists&&a.room.playlists.length?(t(),o("ul",le,[(t(!0),o(w,null,k(a.room.playlists,i=>(t(),o("li",{key:i.id,class:"flex items-center rounded p-3"},[m(l(i.name)+" ",1),e("button",{class:"ml-auto flex items-center text-red-500",title:s.__("Detach"),onClick:r=>h(i)},[re,m(" "+l(s.__("Detach")),1)],8,ae)]))),128))])):(t(),o("p",ne,l(s.__("No playlist")),1))]),_:1}))}};export{_e as _,pe as a};
