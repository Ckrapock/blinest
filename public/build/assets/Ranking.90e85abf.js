import{e as b,h as p,i as g,k,G as y,o,c as C,w as i,a as n,d as N,b as r,y as f,n as v,u as B,m as x,t as d,F as _,g as E,U as S}from"./app.d9a699ed.js";import{C as T}from"./Card.3bb00577.js";import"./plugin-vue_export-helper.21dcd24c.js";const V=n("h3",{class:"text-xl font-bold"},"Classement",-1),P={class:"overflow-y-scroll"},j={class:"flex items-center"},F=n("sup",null,"PTS",-1),z={__name:"Ranking",props:{users:Array,channel:String,data:Object},setup(c){const s=c,u=b().props.value.auth.user,w=p([]),t=p(s==null?void 0:s.users);return g(()=>s.users,a=>{t.value=a}),k(()=>{Echo.channel(s.channel).listen("NewScore",a=>{w.value.push(a.score);let l=t.value.findIndex(e=>e.id===a.score.user_id);t.value[l].score.total=a.score.total,t.value[l].score.points=a.score.points,t.value[l].score.answers.push(...a.score.answers)}),Echo.channel(s.channel).listen("TrackPlayed",()=>{t.value.find(a=>a.id===u.id).score.answers=[]})}),y(()=>{Echo.leave(s.channel)}),(a,l)=>(o(),C(T,null,{header:i(()=>[V]),default:i(()=>[n("div",P,[N(S,{name:"flip-list",tag:"ul"},{default:i(()=>[(o(!0),r(_,null,f(t.value,e=>(o(),r("li",{key:e.id,class:v(["flex justify-between border-b px-2 py-4",{"bg-neutral-200":B(u).id===e.id}])},[n("div",null,[x(d(e.name)+" ",1),n("div",j,[c.data?(o(!0),r(_,{key:0},f(c.data.track.answers,h=>{var m;return o(),r("span",{class:v(["mr-1 rounded px-1 text-[10px] font-bold uppercase text-neutral-500 text-white",(m=e==null?void 0:e.score)!=null&&m.answers.includes(h.id)?"bg-purple-300":"bg-neutral-300"])},d(a.__(h.name)),3)}),256)):E("",!0)])]),n("div",null,[x(d(e!=null&&e.score?e.score.total:0)+" ",1),F])],2))),128))]),_:1})])]),_:1}))}};export{z as default};
