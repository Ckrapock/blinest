import{P as z,o as s,h as C,w as p,b as e,e as W,c as o,t as l,a as c,u as n,F as j,v as U,f as O,g as V,k as x,L as se,M as te,r as le,d as g,I as T,N as F,l as N,s as B,O as oe,n as ae}from"./app-d721267d.js";import{_ as A}from"./Icon-97e692a8.js";import{C as M}from"./Card-73e0c1e9.js";import{_ as D}from"./TextInput-09144107.js";import{_ as P}from"./SelectInput-a8021202.js";import{_ as re}from"./Pagination-dbebdbb6.js";import{_ as G}from"./Modal-50313139.js";import{S as ne}from"./Spinner-7167c342.js";import{_ as J}from"./Dropdown-1979e914.js";import{t as ie,p as de}from"./throttle-815b75de.js";import{d as Q}from"./debounce-c15f2e14.js";import{T as R}from"./Tip-74f30155.js";import{L as q}from"./LoadingButton-c26c9090.js";const ue=["onSubmit"],ce={class:"px-6 py-4"},pe={key:0,class:"text-lg"},me={key:1,class:"text-lg"},_e={class:"mt-4 flex flex-wrap"},he=["value"],ve={class:"flex items-center justify-between px-2 py-4 text-right"},fe=["disabled"],ye={class:"flex items-center"},be=["disabled"],we=["disabled"],ke={__name:"TrackAnswerForm",props:{answer:{type:Object,default(){return{answer_type_id:1,value:"",score:"0.5"}}},show:[Boolean,Number],maxWidth:{type:String,default:"2xl"},closeable:{type:Boolean,default:!0},answer_types:Object},emits:["close"],setup(d,{emit:h}){const a=d,r=z({answer_type_id:a.answer?a.answer.answer_type_id:1,value:a.answer?a.answer.value:"",score:a.answer?a.answer.score:.5}),v=()=>{h("close")},w=()=>{a.answer?m():k()},m=()=>{r.put(route("tracks.answers.update",[a.show,a.answer.id]),{preserveScroll:!0,onSuccess:()=>{v()}})},k=()=>{r.post(route("tracks.answers.store",a.show),{preserveScroll:!0,onSuccess:()=>{v()}})},y=()=>{r.delete(route("tracks.answers.delete",[a.show,a.answer.id]),{preserveScroll:!0,preserveState:!1,onSuccess:()=>{v()}})};return(b,i)=>(s(),C(G,{show:d.show,"max-width":d.maxWidth,closeable:d.closeable,onClose:v},{default:p(()=>[e("form",{onSubmit:W(w,["prevent"])},[e("div",ce,[d.answer?(s(),o("div",pe,l(b.__("Edit Answer")),1)):(s(),o("div",me,l(b.__("Add Answer")),1)),e("div",_e,[c(P,{modelValue:n(r).answer_type_id,"onUpdate:modelValue":i[0]||(i[0]=_=>n(r).answer_type_id=_),error:n(r).errors.answer_type_id,class:"w-full pb-8 pr-6 lg:w-1/2",label:b.__("Type")},{default:p(()=>[(s(!0),o(j,null,U(d.answer_types,_=>(s(),o("option",{value:_.id},l(b.__(_.name)),9,he))),256))]),_:1},8,["modelValue","error","label"]),c(D,{modelValue:n(r).score,"onUpdate:modelValue":i[1]||(i[1]=_=>n(r).score=_),type:"number",step:"0.5",min:"0",max:"99",error:n(r).errors.score,class:"w-full pb-8 pr-6 lg:w-1/2",label:b.__("Score")},null,8,["modelValue","error","label"]),c(D,{modelValue:n(r).value,"onUpdate:modelValue":i[2]||(i[2]=_=>n(r).value=_),error:n(r).errors.value,class:"w-full pb-8 pr-6",label:b.__("Answer")},null,8,["modelValue","error","label"])])]),e("div",ve,[d.answer&&d.answer.id?(s(),o("button",{key:0,type:"button",class:O(["mx-2 text-red-400",{"opacity-25":n(r).processing}]),disabled:n(r).processing,onClick:y},l(b.__("Delete")),11,fe)):V("",!0),e("div",ye,[e("button",{class:"btn-secondary mx-2 bg-gray-400",onClick:v},l(b.__("Close")),1),d.answer&&d.answer.id?(s(),o("button",{key:0,type:"submit",class:O(["btn-primary ml-2",{"opacity-25":n(r).processing}]),disabled:n(r).processing},l(b.__("Update")),11,be)):(s(),o("button",{key:1,type:"submit",class:O(["btn-primary ml-2",{"opacity-25":n(r).processing}]),disabled:n(r).processing},l(b.__("Add")),11,we))])])],40,ue)]),_:1},8,["show","max-width","closeable"]))}},ge={key:1,class:"mr-2 flex h-10 w-10 flex-shrink-0 items-center justify-center rounded-full bg-neutral-800"},H={__name:"MiniPlayer",props:{track:Object},setup(d){const h=d,a=new Audio,r=x(!1),v=x(!1);se(()=>{m()});const w=()=>{r.value=!0,v.value=!0,a.src=h.track.preview_url,a.addEventListener("canplaythrough",()=>{r.value=!1,a.play()})},m=()=>{v.value=!1,a.pause()};return(k,y)=>v.value?r.value?(s(),o("div",ge,[c(ne,{class:"h-full w-full"})])):(s(),C(A,{key:2,name:"stop",class:"mr-2 h-12 w-12 flex-shrink-0 cursor-pointer",onClick:m})):(s(),C(A,{key:0,name:"play",class:"mr-2 h-12 w-12 flex-shrink-0 cursor-pointer",onClick:w}))}},xe={key:0,class:"inline-block align-middle ml-1"},$e={inheritAttrs:!1},L=Object.assign($e,{__name:"Sortable",props:{field:{type:String,default:null}},emits:["update:modelValue"],setup(d,{emit:h}){const a=d,r=te(),v=()=>{h("update:modelValue",{field:a.field,direction:r.modelValue&&r.modelValue.direction==="asc"?"desc":"asc"})};return(w,m)=>(s(),o("div",{class:O([w.$attrs.class,"cursor-pointer"]),onClick:v},[le(w.$slots,"default"),w.$attrs.modelValue&&d.field==w.$attrs.modelValue.field?(s(),o("div",xe,[w.$attrs.modelValue.direction==="asc"?(s(),C(A,{key:0,name:"arrow-down",class:"block w-4 h-4 fill-gray-400"})):(s(),C(A,{key:1,name:"arrow-up",class:"block w-4 h-4 fill-gray-400"}))])):V("",!0)],2))}}),Ve={class:"p-4"},Ce=["onSubmit"],Se=e("br",null,null,-1),Ae=["value"],je={key:0},Ue=e("small",null,"Vous pouvez trouver l'ID de la playlist dans la barre d'adresse de votre navigateur",-1),De=e("br",null,null,-1),Me=e("span",{class:"font-bold underline"},"37i9dQZF1DXcBWIGoYBM5M",-1),Be=e("span",{class:"font-bold underline"},"53362031",-1),Oe=e("h3",{class:"uppercase"},"Confirmer l'importation",-1),Pe={class:"mb-4 flex items-center"},ze=["src"],Ie={class:"flex flex-col"},Le={class:"text-xl"},Te={class:"italic"},Ne={class:"mb-4"},Ee=e("b",null,"Origine :",-1),Fe={key:0},Re=e("b",null,"Playlist ID :",-1),qe=e("b",null,"Titres à importer :",-1),He={class:"mt-4 flex items-center justify-end gap-2"},We={__name:"ImportPlaylist",props:{playlist:Object,providerPlaylist:{type:Object,default:null}},emits:["close"],setup(d,{emit:h}){const a=d,r=x(!0),v=x(["Spotify","Deezer","Blinest likes"]),w=x(1),m=x(null),k=z({provider:v.value[0],playlist_id:""}),y=()=>{console.log("Checking"),k.post(route("playlists.providers.find",a.playlist.id),{only:["providerPlaylist"],onSuccess:i=>{m.value=i.props.providerPlaylist,m.value&&(m.value.message?k.errors.provider_id=`[${m.value.code}] ${m.value.message}`:w.value=2)}})},b=()=>{k.transform(i=>({...i,tracks_count:m.value.tracks_count})).post(route("playlists.providers.import",a.playlist.id),{onSuccess:()=>{h("close")}})};return(i,_)=>(s(),C(G,{show:r.value,onClose:_[3]||(_[3]=S=>h("close"))},{default:p(()=>[e("div",Ve,[w.value===1?(s(),C(M,{key:0,class:"shadow-none"},{default:p(()=>[e("form",{onSubmit:W(y,["prevent"]),class:"flex flex-col gap-4"},[c(R,null,{default:p(()=>[g("Pour importer une playlist, celle-ci doit être publique."),Se,g("Les extraits ne pouvant pas être lus par le site ne seront pas importés.")]),_:1}),c(P,{modelValue:n(k).provider,"onUpdate:modelValue":_[0]||(_[0]=S=>n(k).provider=S),error:n(k).provider.error,label:"Origine de la playlist",required:""},{default:p(()=>[(s(!0),o(j,null,U(v.value,S=>(s(),o("option",{value:S},l(S),9,Ae))),256))]),_:1},8,["modelValue","error"]),n(k).provider!="Blinest likes"?(s(),o("div",je,[c(D,{modelValue:n(k).playlist_id,"onUpdate:modelValue":_[1]||(_[1]=S=>n(k).playlist_id=S),error:n(k).errors.provider_id,type:"text",label:"ID de la playlist",required:""},null,8,["modelValue","error"]),Ue,De,T(e("small",null,[g("Exemple d'ID Spotify : https://open.spotify.com/playlist/"),Me],512),[[F,n(k).provider==="Spotify"]]),T(e("small",null,[g("Exemple d'ID Deezer : https://www.deezer.com/fr/playlist/"),Be],512),[[F,n(k).provider==="Deezer"]])])):V("",!0),c(q,{class:"btn-secondary btn-sm ml-auto",loading:n(k).processing},{default:p(()=>[g(l(i.__("Next")),1)]),_:1},8,["loading"])],40,Ce)]),_:1})):V("",!0),w.value===2?(s(),C(M,{key:1,class:"shadow-none"},{header:p(()=>[Oe]),default:p(()=>[e("div",Pe,[e("img",{src:m.value.image,class:"mr-2 h-20 w-20 rounded-full"},null,8,ze),e("div",Ie,[e("h3",Le,l(m.value.name),1),e("p",Te,l(m.value.description),1)])]),e("ul",Ne,[e("li",null,[Ee,g(" "+l(n(k).provider),1)]),m.value.id?(s(),o("li",Fe,[Re,g(" "+l(m.value.id),1)])):V("",!0),e("li",null,[qe,g(" "+l(m.value.tracks_count),1)])]),c(R,null,{default:p(()=>[g("Les titres en doublon ne seront pas importés.")]),_:1}),e("div",He,[e("button",{class:"btn-secondary btn-sm",onClick:_[2]||(_[2]=S=>w.value=1)},l(i.__("Cancel")),1),c(q,{class:"btn-primary btn-sm",onClick:b,loading:n(k).processing},{default:p(()=>[g(l(i.__("Import")),1)]),_:1},8,["loading"])])]),_:1})):V("",!0)])]),_:1},8,["show"]))}},Ge={class:"flex w-full items-center justify-between"},Je={class:"text-xl font-bold"},Qe=["href"],Xe=e("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24","stroke-width":"1.5",stroke:"currentColor",class:"mr-2 h-4 w-4"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M3 16.5v2.25A2.25 2.25 0 005.25 21h13.5A2.25 2.25 0 0021 18.75V16.5M16.5 12L12 16.5m0 0L7.5 12m4.5 4.5V3"})],-1),Ye={class:"mb-4 flex justify-between gap-2 p-2"},Ze={key:0,class:"flex gap-2 border-b-2 border-neutral-600 bg-neutral-900 p-2 text-sm"},Ke=["onUpdate:modelValue","onClick"],es={key:1,class:"max-h-80 overflow-y-auto bg-neutral-900"},ss={class:"flex items-center gap-2"},ts={class:"mr-2 flex w-80 flex-grow flex-col"},ls={class:"max-w-[16rem] truncate break-normal font-bold"},os={class:"max-w-[16rem] truncate break-normal text-sm"},as={key:0,class:"ml-auto"},rs=["disabled","onClick"],ns={key:1,class:"ml-auto"},is=["disabled","onClick"],ds=e("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"currentColor",class:"h-5 w-5 mr-2"},[e("path",{"fill-rule":"evenodd",d:"M12 2.25a.75.75 0 01.75.75v11.69l3.22-3.22a.75.75 0 111.06 1.06l-4.5 4.5a.75.75 0 01-1.06 0l-4.5-4.5a.75.75 0 111.06-1.06l3.22 3.22V3a.75.75 0 01.75-.75zm-9 13.5a.75.75 0 01.75.75v2.25a1.5 1.5 0 001.5 1.5h13.5a1.5 1.5 0 001.5-1.5V16.5a.75.75 0 011.5 0v2.25a3 3 0 01-3 3H5.25a3 3 0 01-3-3V16.5a.75.75 0 01.75-.75z","clip-rule":"evenodd"})],-1),us={class:"flex items-center gap-2"},cs=e("option",{value:5},"5",-1),ps=e("option",{value:10},"10",-1),ms=e("option",{value:15},"15",-1),_s=e("option",{value:20},"20",-1),hs={key:0,class:"mx-4 overflow-x-auto"},vs={class:"w-full whitespace-nowrap"},fs={class:"text-left font-bold"},ys=e("th",{class:"px-6 pb-4 pt-6",colspan:"2"},null,-1),bs={class:"px-6 pb-4 pt-6"},ws={class:"px-6 pb-4 pt-6"},ks={class:"px-6 pb-4 pt-6",colspan:"2"},gs={class:"px-6 pb-4 pt-6",colspan:"2"},xs={class:"border-t"},$s=["href"],Vs={class:"border-t"},Cs={class:"flex items-center justify-center px-2 py-4 focus:text-blinest-500"},Ss={class:"border-t"},As={class:"flex flex-col items-start px-6 py-4 text-sm focus:text-blinest-500"},js=["onClick"],Us={class:"font-bold"},Ds=["onClick"],Ms={class:"border-t"},Bs={class:"flex items-start px-6 py-4 text-center text-sm"},Os=e("option",{value:0},"Facile",-1),Ps=e("option",{value:1},"Moyen",-1),zs=e("option",{value:2},"Difficile",-1),Is=e("option",{value:3},"Expert",-1),Ls={class:"border-t"},Ts={class:"flex items-start px-6 py-4 text-center text-sm"},Ns={class:"border-t"},Es={class:"flex items-start px-6 py-4 text-center text-sm focus:text-blinest-500"},Fs={class:"border-t"},Rs={class:"flex flex-col items-start px-6 py-4 text-sm focus:text-blinest-500"},qs={class:"border-t"},Hs={key:0},Ws={class:"border-t px-6 py-4",colspan:"4"},Gs={key:1,class:"p-2"},gt={__name:"TracksManager",props:{playlist:Object,answer_types:Object,tracks:Object,filters:{type:Object,default:{search:"",paginate:5,sortable:null}}},setup(d){const h=d,a=z({search:h.filters.search,paginate:h.filters.paginate??5,sortable:h.filters.sortable}),r=x(null),v=x(!1),w=x(!1),m=x(""),k=x([{id:1,provider:"deezer",name:"Deezer",selected:!0},{id:2,provider:"spotify",name:"Spotify",selected:!0},{id:3,provider:"itunes",name:"Apple music",selected:!0}]),y=x(["deezer","spotify","itunes"]);x("");const b=x(!1),i=x(!1),_=x([]);N(m,Q(()=>{I()},300)),N(a,ie(()=>{B.get(route("playlists.edit",h.playlist),de(a),{preserveScroll:!0,preserveState:!0})},150),{deep:!0});const S=u=>{y.value.includes(u.provider)?y.value=y.value.filter(f=>f!=u.provider):y.value.push(u.provider)},I=()=>{m.value.length>1?(i.value=!0,axios.get(route("tracks.search",h.playlist.id)+"?term="+m.value).then(u=>{_.value=u.data.tracks,i.value=!1})):_.value=[]},X=u=>{v.value=u.id},Y=(u,f=null)=>{r.value=f,w.value=u.id},Z=()=>{r.value=null,v.value=!1,w.value=!1},K=u=>{B.post(route("playlists.tracks.store",h.playlist.id),u,{preserveScroll:!0,preserveState:!0,onSuccess:()=>{I()}})},E=u=>{let f=u.added?u.added.id:u.id;confirm("Voulez-vous vraiment supprimer cet extrait?")&&B.delete(route("playlists.tracks.delete",[h.playlist.id,f]),{preserveScroll:!0,preserveState:!0,onSuccess:()=>{I()}})},ee=(u,f)=>{B.put(route("playlists.tracks.update",[h.playlist.id,f]),{dificulty:u.target.value},{preserveScroll:!0})};return(u,f)=>(s(),o(j,null,[c(M,null,{header:p(()=>[e("div",Ge,[e("h3",Je,l(u.__("Tracks manager"))+" ("+l(d.tracks.total)+")",1),c(D,{modelValue:n(a).search,"onUpdate:modelValue":f[0]||(f[0]=t=>n(a).search=t),"prepend-icon":"search",placeholder:u.__("Search in playlist")+"..."},null,8,["modelValue","placeholder"]),e("a",{href:u.route("playlists.export",d.playlist),target:"_blank",class:"btn-secondary rounded"},[Xe,g(" Exporter ")],8,Qe)])]),default:p(()=>[e("div",null,[e("div",Ye,[c(J,{placement:"bottom-start","auto-close":!1},{default:p(()=>[c(D,{modelValue:m.value,"onUpdate:modelValue":f[1]||(f[1]=t=>m.value=t),"prepend-icon":"plus","append-icon":"cheveron-down",loading:i.value,placeholder:u.__("Search on Deezer, Spotify and Apple music...")},null,8,["modelValue","loading","placeholder"])]),dropdown:p(()=>[_.value.length?(s(),o("div",Ze,[(s(!0),o(j,null,U(k.value,t=>(s(),o("label",null,[T(e("input",{type:"checkbox","onUpdate:modelValue":$=>t.selected=$,onClick:$=>S(t)},null,8,Ke),[[oe,t.selected]]),g(" "+l(t.name),1)]))),256))])):V("",!0),_.value.length?(s(),o("ul",es,[(s(!0),o(j,null,U(_.value.filter(t=>y.value.includes(t.provider)),t=>(s(),o("li",{class:"relative border-b border-neutral-600 px-2 py-3",key:t.id},[e("div",ss,[e("div",null,[c(A,{name:t.provider,title:t.provider,class:"h-6 w-6 flex-shrink-0"},null,8,["name","title"])]),e("div",null,[(s(),C(H,{key:`mini-player-results-${t.id}`,track:t},null,8,["track"]))]),e("div",ts,[e("span",ls,l(t.artist_name),1),e("span",os,l(t.track_name),1)]),t.added?(s(),o("div",ns,[e("button",{disabled:i.value,class:"btn-danger btn-sm",type:"button",onClick:$=>E(t)},l(u.__("Remove")),9,is)])):(s(),o("div",as,[e("button",{disabled:i.value,class:"btn-primary btn-sm",type:"button",onClick:$=>K(t)},l(u.__("Add")),9,rs)]))])]))),128))])):V("",!0)]),_:1}),e("button",{class:"btn-secondary btn-sm",onClick:f[2]||(f[2]=t=>b.value=!0)},[ds,g(" Importer une playlist ")]),e("div",us,[c(P,{modelValue:n(a).paginate,"onUpdate:modelValue":f[3]||(f[3]=t=>n(a).paginate=t)},{default:p(()=>[cs,ps,ms,_s]),_:1},8,["modelValue"])])]),d.tracks.data.length?(s(),o("div",hs,[e("table",vs,[e("tr",fs,[ys,e("th",bs,l(u.__("Answers")),1),e("th",ws,[c(L,{field:"dificulty",modelValue:n(a).sortable,"onUpdate:modelValue":f[4]||(f[4]=t=>n(a).sortable=t)},{default:p(()=>[g(l(u.__("Dificulty")),1)]),_:1},8,["modelValue"])]),e("th",ks,[c(L,{field:"votes",modelValue:n(a).sortable,"onUpdate:modelValue":f[5]||(f[5]=t=>n(a).sortable=t)},{default:p(()=>[g(l(u.__("Votes")),1)]),_:1},8,["modelValue"])]),e("th",gs,[c(L,{field:"created_at",modelValue:n(a).sortable,"onUpdate:modelValue":f[6]||(f[6]=t=>n(a).sortable=t)},{default:p(()=>[g(l(u.__("Created at")),1)]),_:1},8,["modelValue"])])]),(s(!0),o(j,null,U(d.tracks.data,t=>(s(),o("tr",{key:t.id},[e("td",xs,[e("a",{target:"_blank",href:t.provider_url,class:"flex items-center justify-center px-2 py-4 focus:text-blinest-500"},[c(A,{name:t.provider,title:t.provider,class:"mr-2 h-6 w-6 flex-shrink-0"},null,8,["name","title"])],8,$s)]),e("td",Vs,[e("div",Cs,[(s(),C(H,{key:`mini-player-list-${t.id}`,track:t},null,8,["track"]))])]),e("td",Ss,[e("div",As,[(s(!0),o(j,null,U(t.answers,$=>(s(),o("div",{key:$.id,class:"cursor-pointer whitespace-normal break-words",onClick:it=>Y(t,$)},[e("span",Us,l(u.__($.type.name))+":",1),g(" "+l($.value)+" ("+l($.score)+"pts) ",1)],8,js))),128)),e("button",{class:"text-neutral-400",onClick:$=>X(t)},[c(A,{name:"plus",class:"inline-block h-4 w-4 flex-shrink-0 fill-neutral-400"}),g(l(u.__("Add an answer")),1)],8,Ds)])]),e("td",Ms,[e("div",Bs,[c(P,{modelValue:t.dificulty,"onUpdate:modelValue":$=>t.dificulty=$,error:u.$page.props.errors.dificulty,onChange:$=>ee($,t)},{default:p(()=>[Os,Ps,zs,Is]),_:2},1032,["modelValue","onUpdate:modelValue","error","onChange"])])]),e("td",Ls,[e("div",Ts,[c(A,{name:"thumb-up",class:"mr-2 h-6 w-6 flex-shrink-0"}),g(" "+l(t.up_votes),1)])]),e("td",Ns,[e("div",Es,[c(A,{name:"thumb-down",class:"mr-2 h-6 w-6 flex-shrink-0"}),g(" "+l(t.down_votes),1)])]),e("td",Fs,[e("div",Rs,l(t.created_at),1)]),e("td",qs,[c(A,{name:"delete",class:"mr-2 h-6 w-6 flex-shrink-0 cursor-pointer fill-red-400",onClick:$=>E(t)},null,8,["onClick"])])]))),128)),d.tracks.length===0?(s(),o("tr",Hs,[e("td",Ws,l(u.__("No tracks found"))+".",1)])):V("",!0)])])):(s(),o("div",Gs,l(u.__("Aucun extrait")),1)),c(re,{class:"p-8",links:d.tracks.links},null,8,["links"]),v.value||w.value&&r.value?(s(),C(ke,{key:2,answer:r.value,answer_types:d.answer_types,show:w.value||v.value,"max-width":"md",onClose:Z},null,8,["answer","answer_types","show"])):V("",!0)])]),_:1}),b.value?(s(),C(We,{key:0,onClose:f[7]||(f[7]=t=>b.value=!1),playlist:d.playlist},null,8,["playlist"])):V("",!0)],64))}},Js={class:"text-xl font-bold"},Qs={key:0,class:"max-w-50 max-h-80 overflow-y-auto"},Xs=["src"],Ys={class:"mr-4"},Zs=["title","onClick"],Ks={key:0},et=["src"],st=["title","onClick"],tt=e("svg",{xmlns:"http://www.w3.org/2000/svg",class:"h-6 w-6",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor","stroke-width":"2"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M17 16l4-4m0 0l-4-4m4 4H7m6 4v1a3 3 0 01-3 3H6a3 3 0 01-3-3V7a3 3 0 013-3h4a3 3 0 013 3v1"})],-1),lt=[tt],ot={key:1,class:"my-2 text-sm text-neutral-400"},xt={__name:"ModeratorsManager",props:{playlist:Object},setup(d){const h=d,a=x(""),r=x(!1),v=x(null),w=z({user_id:null});N(a,Q(()=>{r.value=!0,axios.get("/api/users",{params:{search:a.value}}).then(y=>{v.value=y.data.users,r.value=!1})},300));const m=y=>{w.transform(b=>({user_id:y.id})).post(`/playlists/${h.playlist.id}/moderators/attach`,{preserveScroll:!0})},k=y=>{w.transform(b=>({user_id:y.id})).delete(`/playlists/${h.playlist.id}/moderators/detach`,{preserveScroll:!0})};return(y,b)=>(s(),C(M,null,{header:p(()=>[e("h3",Js,l(y.__("Moderators")),1)]),default:p(()=>[c(J,{placement:"bottom-start",class:"mb-2 pb-2",onClosed:b[1]||(b[1]=i=>a.value="")},{default:p(()=>[c(D,{modelValue:a.value,"onUpdate:modelValue":b[0]||(b[0]=i=>a.value=i),"prepend-icon":"search","append-icon":"cheveron-down",loading:r.value,placeholder:y.__("Add a moderator")},null,8,["modelValue","loading","placeholder"])]),dropdown:p(()=>[v.value&&v.value.data.length?(s(),o("ul",Qs,[(s(!0),o(j,null,U(v.value.data,i=>(s(),o("li",{key:i.id,class:"flex items-center p-2"},[i.photo?(s(),o("img",{key:0,class:"-my-2 mr-2 block h-8 w-8 rounded-full",src:i.photo},null,8,Xs)):V("",!0),e("span",Ys,l(i.name),1),e("button",{class:"ml-auto rounded-full bg-blue-500 py-1 px-2 text-xs uppercase",title:y.__("Add"),onClick:_=>m(i)},l(y.__("Add")),9,Zs)]))),128))])):V("",!0)]),_:1}),d.playlist.moderators.length?(s(),o("ul",Ks,[(s(!0),o(j,null,U(d.playlist.moderators,i=>(s(),o("li",{key:i.id,class:"flex items-center rounded p-3"},[i.photo?(s(),o("img",{key:0,class:"-my-2 mr-2 block h-8 w-8 rounded-full",src:i.photo},null,8,et)):V("",!0),g(" "+l(i.name)+" ",1),i.id!=d.playlist.user_id?(s(),o("button",{key:1,class:"ml-auto text-red-500",title:y.__("Remove"),onClick:_=>k(i)},lt,8,st)):V("",!0)]))),128))])):(s(),o("p",ot,l(y.__("No moderator")),1))]),_:1}))}},at={class:"text-xl font-bold"},rt={key:0},nt={key:1,class:"my-2 text-sm text-neutral-400"},$t={__name:"RoomsList",props:{playlist:Object},setup(d){return(h,a)=>(s(),C(M,null,{header:p(()=>[e("h3",at,l(h.__("Rooms")),1)]),default:p(()=>[d.playlist.rooms.length?(s(),o("ul",rt,[(s(!0),o(j,null,U(d.playlist.rooms,r=>(s(),o("li",{key:r.id,class:"flex items-center rounded p-3 hover:bg-neutral-200"},[c(n(ae),{href:h.route("rooms.show",r.id)},{default:p(()=>[g(l(r.name),1)]),_:2},1032,["href"])]))),128))])):(s(),o("p",nt,l(h.__("Empty")),1))]),_:1}))}};export{xt as _,$t as a,gt as b};
