import{o as r,b as c,a as e,d as s,w as v,u as b,L as E,r as V,g as x,z as y,e as k,t as w,h as d,k as j,G as S,F as M,y as B,c as C,l as F,H}from"./app.d9a699ed.js";import{L as R}from"./Icon.8cf741ea.js";import{_ as z,a as N,L as T,F as O}from"./LanguageSwitcher.07dcd9f6.js";import{_ as $,a as P}from"./Volume.0e692a8d.js";import"./_defineProperty.89a04d3d.js";import{S as U}from"./Spinner.be8cb827.js";import{_ as D}from"./TextInput.35f3ac91.js";import G from"./Player.d52baac9.js";import q from"./UserInput.56de4e93.js";import A from"./Answers.47130e7d.js";import I from"./Ranking.90e85abf.js";import J from"./Controls.bd6ac12f.js";import K from"./FinishedRoundModal.98f33f71.js";import"./plugin-vue_export-helper.21dcd24c.js";import"./Card.3bb00577.js";import"./Modal.fe11a602.js";const Q={class:"text-neutral-200"},W=e("div",{id:"dropdown"},null,-1),X={class:"md:flex md:flex-col"},Y={class:"md:flex md:h-screen md:flex-col"},Z={class:"md:flex md:flex-shrink-0"},ee={class:"flex items-center justify-between px-12 py-2 md:flex-shrink-0"},se=e("svg",{class:"h-6 w-6 fill-white",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20"},[e("path",{d:"M0 3h20v2H0V3zm0 6h20v2H0V9zm0 6h20v2H0v-2z"})],-1),oe={class:"mt-2 rounded px-8 py-4 shadow-lg"},te={class:"md:text-md items-center grid w-full grid-cols-2 p-4 text-sm md:px-12 md:py-0"},le={class:"flex items-center justify-end"},ne={class:"md:flex md:flex-grow md:overflow-hidden"},ae={key:0,class:"md:flex-1"},re={__name:"RoomLayout",setup(l){return(a,t)=>(r(),c("div",Q,[W,e("div",X,[e("div",Y,[e("div",Z,[e("div",ee,[s(b(E),{class:"mt-1",href:"/"},{default:v(()=>[s(R,{class:"fill-white",width:"120",height:"28"})]),_:1}),s(z,{class:"md:hidden",placement:"bottom-end"},{default:v(()=>[se]),dropdown:v(()=>[e("div",oe,[s($)])]),_:1})]),e("div",te,[s($,{class:"hidden w-auto md:flex"}),e("div",le,[s(N,{class:"mr-4"}),s(T,{class:"mr-4"}),s(P)])])]),e("div",ne,[s(y,{name:"slide-right",appear:""},{default:v(()=>[a.$slots.default?(r(),c("div",ae,[s(O),V(a.$slots,"default")])):x("",!0)]),_:3})])])])]))}},ie={class:"my-1 text-sm"},de={class:"font-bold mr-1"},ce={class:""},me={__name:"Message",props:{message:Object},setup(l){return k().props.value.auth.user,(a,t)=>(r(),c("div",ie,[e("span",de,w(l.message.user.name),1),e("span",ce,": "+w(l.message.body),1)]))}},ue={class:"flex flex-col h-full"},he={class:"flex p-2"},_e=["onSubmit"],fe=e("button",{type:"submit",class:"rounded-r bg-teal-600 p-2 text-neutral-100"},"Send",-1),ve={__name:"Chat",props:{room:Object},setup(l){const a=l,t=`chat-room.${a.room.id}`,m=d(""),u=d(a.room.latest_messages);k().props.value.auth.user;const i=d();j(()=>{Echo.private(t).listen("NewMessage",n=>{console.log(n.message),u.value.unshift(n.message),h()})}),S(()=>{Echo.leave(t)});const p=()=>{axios.post(`/rooms/${a.room.id}/message`,{body:m.value}).then(n=>{m.value=""})},h=()=>{let n=i.value;n.scrollTop=n.scrollHeight+1e3};return(n,g)=>(r(),c("div",ue,[e("div",{ref_key:"messenger",ref:i,class:"flex-1 overflow-y-scroll flex flex-col-reverse p-2"},[(r(!0),c(M,null,B(u.value,_=>(r(),C(me,{key:_.id,message:_},null,8,["message"]))),128))],512),e("div",he,[e("form",{onSubmit:F(p,["prevent"]),class:"flex"},[s(D,{modelValue:m.value,"onUpdate:modelValue":g[0]||(g[0]=_=>m.value=_),class:"rounded-r-none"},null,8,["modelValue"]),fe],40,_e)])]))}},pe={key:0,class:"flex h-full w-full items-center justify-center"},ge={key:0,class:"md:flex h-full"},xe={class:"relative flex-1 overflow-y-auto px-12 py-8","scroll-region":""},we={class:"prose mb-4 dark:prose-invert"},$e={class:"mb-8"},be={class:"grid md:grid-cols-2 md:gap-8"},ye=["title"],ke=e("svg",{xmlns:"http://www.w3.org/2000/svg",class:"h-8 w-8",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor","stroke-width":"2"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M8 12h.01M12 12h.01M16 12h.01M21 12c0 4.418-4.03 8-9 8a9.863 9.863 0 01-4.255-.949L3 20l1.395-3.72C3.512 15.042 3 13.574 3 12c0-4.418 4.03-8 9-8s9 3.582 9 8z"})],-1),je=[ke],Se={key:0,class:"flex h-96 md:h-full w-full md:w-1/5 flex-shrink-0 flex-col border-neutral-700 bg-neutral-800 transition-all duration-300"},Ge={__name:"Show",props:{room:Object},setup(l){const a=l,t=`rooms.${a.room.id}`,m=d(null),u=d(!1),i=d(null),p=d(null),h=d(!1),n=d(!0);j(()=>{Echo.join(t).here(o=>{console.log(o),i.value=o,g()}).joining(o=>{i.value.push(o)}).leaving(o=>{i.value=i.value.filter(f=>f.id!==o.id)}).error(o=>{console.error(o)})}),S(()=>{Echo.leave(t)});const g=()=>{axios.get(`/rooms/${a.room.id}/joined`).then(()=>{u.value=!0,_()})},_=()=>{Echo.channel(t).listen("RoundStarted",o=>{console.warn("Round started"),m.value=o.round,h.value=!1}),Echo.channel(t).listen("RoundFinished",o=>{console.warn("Round finished"),m.value=null,h.value=!0}),Echo.channel(t).listen("TrackPlayed",o=>{p.value=o.data})};return(o,f)=>(r(),c(M,null,[s(b(H),{title:l.room.name},null,8,["title"]),s(re,null,{default:v(()=>[u.value?x("",!0):(r(),c("div",pe,[s(U),e("h2",null,w(o.__("Loading"))+"...",1)])),s(y,{name:"slide-right"},{default:v(()=>[u.value?(r(),c("div",ge,[e("div",xe,[e("article",we,[e("h2",null,w(l.room.name),1)]),e("div",$e,[s(G,{room:l.room,channel:t},null,8,["room"]),s(q,{data:p.value,channel:t},null,8,["data"])]),e("div",be,[s(A,{class:"mb-8",users:i.value,channel:t},null,8,["users"]),s(I,{class:"mb-8",users:i.value,channel:t,data:p.value},null,8,["users","data"])]),s(J,{channel:t,room:l.room,round:m.value},null,8,["room","round"]),e("button",{class:"hidden md:block absolute right-0 top-4 rounded-l-lg bg-neutral-800 p-2",onClick:f[0]||(f[0]=L=>n.value=!n.value),title:o.__("Hide/Show chatbox")},je,8,ye)]),n.value?(r(),c("div",Se,[s(ve,{room:l.room},null,8,["room"])])):x("",!0)])):x("",!0)]),_:1}),s(K,{show:h.value,onClose:f[1]||(f[1]=L=>h.value=!1)},null,8,["show"])]),_:1})],64))}};export{Ge as default};
