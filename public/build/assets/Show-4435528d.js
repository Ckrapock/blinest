import{J as j,P as q,c as a,a as c,u as l,w as f,F as k,o as n,X as L,b as e,h as w,e as B,g as u,d as h,t as i,v as M,s as b}from"./app-f6824ecf.js";import{_ as T}from"./AppLayout-682c8b6d.js";import{_ as N}from"./TextInput-4085333a.js";import{F as O}from"./FileInput-e3a47611.js";import{L as P}from"./LoadingButton-7c96c2e4.js";import{C as y}from"./Card-261bd2f6.js";import{T as U}from"./Tip-b30cc793.js";import{_ as z}from"./Share-45a2bb62.js";import"./LanguageSwitcher-d168d683.js";import"./_plugin-vue_export-helper-c27b6911.js";import"./Dropdown-b8d92112.js";import"./Icon-1ce38a62.js";import"./Navbar-c61313dc.js";import"./throttle-b11e308e.js";import"./_defineProperty-98183d58.js";import"./isSymbol-363e1f0a.js";import"./debounce-d2fd0fa0.js";import"./SocialIcon-b495e5c3.js";import"./v4-cf522c50.js";import"./Modal-5b330035.js";const F={class:"mx-auto mt-8 max-w-xl"},I=["onSubmit"],R=e("sup",null,"PTS",-1),A={class:"flex items-center justify-between text-xl"},D={class:"mb-6 flex items-center"},J=["src"],E={class:"font-bold"},X=e("sup",{class:"ml-1"},"PTS",-1),G={class:"mx-2 flex w-full items-center justify-between"},H={class:"flex items-center"},K={class:"px-4 text-xl font-bold"},Q={class:"flex flex-grow items-center gap-2 pr-4"},W=["src"],Y={class:"flex items-center gap-2 mr-4"},Z={key:0},ee=e("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"currentColor",class:"h-4 w-4 fill-yellow-500"},[e("path",{"fill-rule":"evenodd",d:"M10.788 3.21c.448-1.077 1.976-1.077 2.424 0l2.082 5.007 5.404.433c1.164.093 1.636 1.545.749 2.305l-4.117 3.527 1.257 5.273c.271 1.136-.964 2.033-1.96 1.425L12 18.354 7.373 21.18c-.996.608-2.231-.29-1.96-1.425l1.257-5.273-4.117-3.527c-.887-.76-.415-2.212.749-2.305l5.404-.433 2.082-5.006z","clip-rule":"evenodd"})],-1),te=[ee],se=["onClick","title"],oe=e("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24","stroke-width":"1.5",stroke:"currentColor",class:"h-4 w-4 group-hover:fill-yellow-500"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M11.48 3.499a.562.562 0 011.04 0l2.125 5.111a.563.563 0 00.475.345l5.518.442c.499.04.701.663.321.988l-4.204 3.602a.563.563 0 00-.182.557l1.285 5.385a.562.562 0 01-.84.61l-4.725-2.885a.563.563 0 00-.586 0L6.982 20.54a.562.562 0 01-.84-.61l1.285-5.386a.562.562 0 00-.182-.557l-4.204-3.602a.563.563 0 01.321-.988l5.518-.442a.563.563 0 00.475-.345L11.48 3.5z"})],-1),le=[oe],ne=["onClick"],ae=e("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24","stroke-width":"1.5",stroke:"currentColor",class:"h-5 w-5"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M22 10.5h-6m-2.25-4.125a3.375 3.375 0 11-6.75 0 3.375 3.375 0 016.75 0zM4 19.235v-.11a6.375 6.375 0 0112.75 0v.109A12.318 12.318 0 0110.374 21c-2.331 0-4.512-.645-6.374-1.766z"})],-1),ie=[ae],re=e("sup",null,"PTS",-1),me={class:"my-6 flex items-center gap-4"},de={key:1},Be={__name:"Show",props:{team:Object,score:Number,members:Object},setup(t){const p=t,m=j().props.auth.user,d=q({_method:"put",name:p.team.name,photo:null}),x=()=>{confirm("Are you sure?")&&b.post(`/teams/${p.team.id}/leave`)},C=o=>{b.post(`/teams/${o.id}/request`)},g=o=>{b.post(`/teams/${o.id}/request/cancel`)},$=o=>{confirm("Veux-tu vraiment transferer la gestion de la team à ce membre ?")&&b.post(`/teams/${p.team.id}/owner/${o.id}`,{preserveState:!1})},S=o=>{confirm("Veux-tu vraiment retirer ce membre de la team ?")&&b.post(`/teams/${p.team.id}/members/${o.id}/remove`,{onSuccess:()=>{console.log("Member removed"),memberList.value=memberList.value.filter(r=>r.id!==o.id)}})},_=()=>{d.post(route("teams.update",p.team.id),{preserveScroll:!0})};return(o,r)=>(n(),a(k,null,[c(l(L),{title:t.team.name},null,8,["title"]),c(T,null,{default:f(()=>[e("div",F,[l(m).id===t.team.user_id?(n(),w(y,{key:0,class:"my-8"},{default:f(()=>[e("form",{onSubmit:B(_,["prevent"])},[c(N,{modelValue:l(d).name,"onUpdate:modelValue":r[0]||(r[0]=s=>l(d).name=s),label:o.__("Name"),class:"mb-4",error:l(d).errors.name},null,8,["modelValue","label","error"]),l(m).permissions.canUploadImage?(n(),w(O,{key:0,modelValue:l(d).photo,"onUpdate:modelValue":r[1]||(r[1]=s=>l(d).photo=s),label:o.__("Image"),class:"mb-4",error:l(d).errors.photo},null,8,["modelValue","label","error"])):u("",!0),l(m).permissions.canUploadImage?u("",!0):(n(),w(U,{key:1},{default:f(()=>[h(" Pour changer l'image de la team il faut minimum 3 mois d'ancienneté et un score total de 2000"),R,h(". ")]),_:1})),c(P,{type:"submit",onClick:_,loading:l(d).processing,class:"btn-primary mb-4 ml-auto"},{default:f(()=>[h(i(o.__("Update")),1)]),_:1},8,["loading"])],40,I)]),_:1})):u("",!0),e("div",A,[e("div",D,[t.team.photo?(n(),a("img",{key:0,class:"-my-2 mr-2 block h-10 w-10 rounded-full",src:t.team.photo},null,8,J)):u("",!0),e("h1",E,"Team "+i(t.team.name),1)]),e("span",null,[h(i(t.score),1),X])]),c(y,null,{header:f(()=>[e("div",G,[e("div",H,i(o.__("Members")),1),e("span",null,i(Object.entries(t.members).length)+" / "+i(t.team.seats),1)])]),default:f(()=>[e("ul",null,[(n(!0),a(k,null,M(Object.values(t.members).sort((s,v)=>v.score-s.score),(s,v)=>(n(),a("li",{key:s.id,class:"m-2 flex items-center rounded bg-neutral-900 p-4"},[e("div",K,i(Number(v)+1),1),e("div",Q,[s.photo?(n(),a("img",{key:0,class:"-my-2 mr-2 block h-8 w-8 rounded-full",src:s.photo},null,8,W)):u("",!0),h(" "+i(s.name),1)]),e("div",Y,[s.id===t.team.user_id?(n(),a("span",Z,te)):u("",!0),l(m).id===t.team.user_id&&s.id!=t.team.user_id?(n(),a("button",{key:1,onClick:V=>$(s),class:"group",title:o.__("Switch owner"),type:"button"},le,8,se)):u("",!0),l(m).id===t.team.user_id&&s.id!=t.team.user_id?(n(),a("button",{key:2,class:"text-red-600",onClick:V=>S(s),type:"button",title:"Retirer le membre de la team"},ie,8,ne)):u("",!0)]),e("div",null,[h(i(s.score),1),re])]))),128))])]),_:1}),e("div",me,[Object.values(t.members).find(s=>s.id===l(m).id)?(n(),a("button",{key:0,type:"button",class:"btn-danger",onClick:x},i(o.__("Leave the team")),1)):(n(),a("div",de,[l(m).declined_requests.includes(t.team.id)?(n(),a("button",{key:0,type:"button",onClick:r[2]||(r[2]=s=>g(t.team)),class:"btn-danger mx-auto my-6"},i(o.__("Declined request")),1)):l(m).pending_requests.includes(t.team.id)?(n(),a("button",{key:1,type:"button",onClick:r[3]||(r[3]=s=>g(t.team)),class:"btn-danger mx-auto my-6"},i(o.__("Cancel join request")),1)):(n(),a("button",{key:2,type:"button",onClick:r[4]||(r[4]=s=>C(t.team)),class:"btn-secondary mx-auto my-6"},i(o.__("Send a join request")),1))])),c(z,{url:o.route("teams.show",t.team),class:"w-6"},null,8,["url"])])])]),_:1})],64))}};export{Be as default};
