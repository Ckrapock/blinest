import{e as g,h as i,i as k,j as y,G as C,o,c as N,w as d,a as l,d as S,b as r,y as v,n as f,u as B,m as _,t as u,F as x,g as E,U as T}from"./app.258a8340.js";import{C as V}from"./Card.73fe1151.js";import"./plugin-vue_export-helper.21dcd24c.js";const j=l("h3",{class:"text-xl font-bold"},"Classement",-1),P={class:"h-64 md:h-80 2xl:h-96 overflow-y-scroll"},F={class:"flex items-center"},G=l("sup",null,"PTS",-1),z={__name:"Ranking",props:{users:Array,channel:String,data:Object},setup(w){const t=w,p=g().props.value.auth.user,b=i([]),s=i(t==null?void 0:t.users),c=i(null);return k(()=>t.users,e=>{s.value=e}),y(()=>{Echo.channel(t.channel).listen("NewScore",e=>{b.value.push(e.score);let n=s.value.findIndex(a=>a.id===e.score.user_id);s.value[n].score.total=e.score.total,s.value[n].score.points=e.score.points,s.value[n].score.answers.push(...e.score.answers)}).listen("TrackPlayed",e=>{c.value=e.track,s.value.find(n=>n.id===p.id).score.answers=[]}).listen("RoundStarted",()=>{s.value.forEach(e=>{e.score.total=0})})}),C(()=>{Echo.leave(t.channel)}),(e,n)=>(o(),N(V,null,{header:d(()=>[j]),default:d(()=>[l("div",P,[S(T,{name:"flip-list",tag:"ul"},{default:d(()=>[(o(!0),r(x,null,v(s.value,a=>(o(),r("li",{key:a.id,class:f(["flex justify-between border-b px-2 py-4",{"bg-neutral-200":B(p).id===a.id}])},[l("div",null,[_(u(a.name)+" ",1),l("div",F,[c.value?(o(!0),r(x,{key:0},v(c.value.answers,h=>{var m;return o(),r("span",{class:f(["mr-1 rounded px-1 text-[10px] font-bold uppercase text-neutral-500 text-white",(m=a==null?void 0:a.score)!=null&&m.answers.includes(h.id)?"bg-purple-300":"bg-neutral-300"])},u(e.__(h.name)),3)}),256)):E("",!0)])]),l("div",null,[_(u(a!=null&&a.score?a.score.total:0)+" ",1),G])],2))),128))]),_:1})])]),_:1}))}};export{z as default};
