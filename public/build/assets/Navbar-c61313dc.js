import{P as C,J as y,l as R,s as $,o as n,c as d,a as p,u as f,f as M,b as e,t as a,g as l,d as h,w as k,n as w,k as g,q as B,h as _,F as S,v as V,I as q,N as T}from"./app-f6824ecf.js";import{_ as L,L as D,a as O}from"./LanguageSwitcher-d168d683.js";import{_ as A}from"./Icon-1ce38a62.js";import{_ as E}from"./TextInput-4085333a.js";import{t as F,p as I}from"./throttle-b11e308e.js";import{_ as J}from"./Dropdown-b8d92112.js";import{S as z}from"./SocialIcon-b495e5c3.js";const N={__name:"SearchRooms",props:{filters:Object},setup(o){var t,s;const i=C({search:(s=(t=y().props)==null?void 0:t.filters)==null?void 0:s.search});return R(i,F(()=>{$.get("/",I(i),{remember:"forget",preserveState:!0})},150),{deep:!0}),(r,c)=>(n(),d("div",{class:M(r.$attrs.class)},[p(E,{class:"text-sm",modelValue:f(i).search,"onUpdate:modelValue":c[0]||(c[0]=v=>f(i).search=v),spellcheck:"false","prepend-icon":"search",placeholder:r.__("Search")+"..."},null,8,["modelValue","placeholder"])],2))}},H={key:0,class:"flex-grow"},P={class:"mb-1 border-b pb-1 uppercase text-neutral-500"},U={class:"my-2 text-sm font-medium"},K={class:"mt-1 flex items-center justify-end"},G={__name:"NewTeamRequest",props:{notification:Object},setup(o){const i=o,t=C({notification_id:i.notification.id}),s=c=>{t.post(`/teams/requests/${i.notification.data.teamRequest.id}/decline`)},r=c=>{t.post(`/teams/requests/${i.notification.data.teamRequest.id}/accept`)};return(c,v)=>o.notification?(n(),d("div",H,[e("h4",P,a(c.__("Team")),1),e("div",U,a(o.notification.data.message),1),e("div",K,[e("button",{type:"button",onClick:s,class:"btn-danger btn-sm mr-2 opacity-80"},a(c.__("Decline")),1),e("button",{type:"button",onClick:r,class:"btn-primary btn-sm opacity-80"},a(c.__("Accept")),1)])])):l("",!0)}},Q={key:0,class:"flex-grow"},W={class:"mb-1 border-b pb-1 uppercase text-neutral-500"},X={class:"my-2 text-sm font-medium"},Y=e("br",null,null,-1),Z={class:"mt-1 flex items-center justify-end"},ee={__name:"TeamRequestApproved",props:{notification:Object},setup(o){const i=o,t=s=>{$.post(`/users/notifications/${i.notification.id}/read`)};return(s,r)=>o.notification?(n(),d("div",Q,[e("h4",W,a(s.__("Team"))+" "+a(o.notification.data.team.name),1),e("div",X,[h(a(s.__("Ta demande a été acceptée!")),1),Y]),e("div",Z,[e("button",{type:"button",onClick:t,class:"btn-primary btn-sm opacity-80"},a(s.__("Mark as read")),1)])])):l("",!0)}},te={key:0,class:"flex-grow"},se={class:"flex justify-between items-center mb-1 border-b pb-1"},oe={class:"uppercase text-red-500 flex items-center font-bold"},ne=e("svg",{xmlns:"http://www.w3.org/2000/svg",class:"h-4 w-4 mr-2",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor","stroke-width":"2"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M15 17h5l-1.405-1.405A2.032 2.032 0 0118 14.158V11a6.002 6.002 0 00-4-5.659V5a2 2 0 10-4 0v.341C7.67 6.165 6 8.388 6 11v3.159c0 .538-.214 1.055-.595 1.436L4 17h5m6 0v1a3 3 0 11-6 0v-1m6 0H9"})],-1),ae={class:"text-xs text-neutral-400"},ie={class:"my-2 text-sm font-medium"},re=e("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24","stroke-width":"1.5",stroke:"currentColor",class:"w-4 h-4 mr-1"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M4.5 12.75l6 6 9-13.5"})],-1),j={__name:"NewRoomAlert",props:{notification:Object},emits:["markedAsdone"],setup(o,{emit:i}){return(t,s)=>o.notification?(n(),d("div",te,[e("div",se,[e("h4",oe,[ne,h(" "+a(t.__("Alerte modération")),1)]),e("span",ae,a(o.notification.data.created_at),1)]),e("div",ie,[p(f(w),{href:t.route("rooms.show",o.notification.data.room.slug)},{default:k(()=>[h(a(o.notification.data.message),1)]),_:1},8,["href"])]),e("button",{type:"button",class:"btn-primary btn-sm mt-2 ml-auto",onClick:s[0]||(s[0]=r=>t.$emit("markedAsdone"))},[re,h(" "+a(t.__("Done")),1)])])):l("",!0)}},le={key:0,class:"flex-grow"},ce={class:"mb-1 flex items-center justify-between border-b pb-1"},de=e("h4",{class:"flex items-center font-bold uppercase"},"Suggestion",-1),ue={class:"text-xs text-neutral-400"},me={class:"my-2 whitespace-pre-line text-sm font-medium"},pe={class:"flex text-xs"},fe={class:"font-bold ml-1"},_e={key:0,class:"text-xs"},he=e("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24","stroke-width":"1.5",stroke:"currentColor",class:"w-4 h-4 mr-1"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M4.5 12.75l6 6 9-13.5"})],-1),ve={__name:"NewSuggestion",props:{notification:Object},emits:["markedAsdone"],setup(o,{emit:i}){return(t,s)=>o.notification?(n(),d("div",le,[e("div",ce,[de,e("span",ue,a(o.notification.data.created_at),1)]),e("div",me,a(o.notification.data.message),1),e("span",pe,[h("Envoyée par "+a(o.notification.data.user.name)+" sur ",1),e("span",fe,a(o.notification.data.room.name),1)]),o.notification.data.room.playlists?(n(),d("span",_e,"Playlists : "+a(o.notification.data.room.playlists),1)):l("",!0),e("button",{type:"button",class:"btn-primary btn-sm mt-2 ml-auto",onClick:s[0]||(s[0]=r=>t.$emit("markedAsdone"))},[he,h(" "+a(t.__("Done")),1)])])):l("",!0)}},ke={key:0,class:"absolute top-0 left-0 right-0 flex justify-center z-30 w-full"},we={class:"my-2 rounded bg-neutral-700 p-2 flex max-w-2xl"},be={class:"relative"},ge={key:0,class:"absolute -top-2 -right-2 flex h-4 w-4 items-center justify-center truncate rounded-full bg-red-500 p-1 text-xs"},ye=e("svg",{xmlns:"http://www.w3.org/2000/svg",class:"h-4 w-4",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor","stroke-width":"2"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M15 17h5l-1.405-1.405A2.032 2.032 0 0118 14.158V11a6.002 6.002 0 00-4-5.659V5a2 2 0 10-4 0v.341C7.67 6.165 6 8.388 6 11v3.159c0 .538-.214 1.055-.595 1.436L4 17h5m6 0v1a3 3 0 11-6 0v-1m6 0H9"})],-1),$e={class:"p-2 font-light"},xe={key:0,class:"max-w-xl max-h-96 overflow-y-scroll pr-2"},Ae={class:"justify-end"},Ne=["onClick"],je=e("svg",{xmlns:"http://www.w3.org/2000/svg",class:"h-4 w-4",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor","stroke-width":"2"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M6 18L18 6M6 6l12 12"})],-1),Ce=[je],Re={key:1},Me={__name:"Notifications",setup(o){const i=y().props.auth.user,t=g(i.notifications),s=g(null);B(()=>{Echo.private("App.Models.User."+i.id).notification(u=>{s.value=u,setTimeout(()=>{s.value=null},3e3),t.value.push(u)})});const r=u=>{v(u),axios.post(`/users/notifications/${u.id}/read`).then(()=>{v(u)})},c=u=>{v(u),$.post(`/users/notifications/${u.id}/done`,{preserveScroll:!0})},v=u=>{t.value=t.value.filter(b=>b.id!==u.id)};return(u,b)=>(n(),d("div",null,[s.value?(n(),d("div",ke,[e("div",we,[s.value.type==="App\\Notifications\\NewRoomAlert"?(n(),_(j,{key:0,notification:s.value,onMarkedAsdone:b[0]||(b[0]=m=>c(s.value))},null,8,["notification"])):l("",!0)])])):l("",!0),p(J,{placement:"bottom-end",autoClose:!1},{default:k(()=>[e("div",be,[t.value.length?(n(),d("div",ge,a(t.value.length),1)):l("",!0),ye])]),dropdown:k(()=>[e("div",$e,[t.value.length?(n(),d("ul",xe,[(n(!0),d(S,null,V(t.value,m=>(n(),d("li",{key:m.id,class:"my-2 rounded bg-neutral-700 p-2 flex"},[m.type==="App\\Notifications\\NewTeamRequest"?(n(),_(G,{key:0,notification:m},null,8,["notification"])):l("",!0),m.type==="App\\Notifications\\TeamRequestApproved"?(n(),_(ee,{key:1,notification:m},null,8,["notification"])):l("",!0),m.type==="App\\Notifications\\NewRoomAlert"?(n(),_(j,{key:2,notification:m,onMarkedAsdone:x=>c(m)},null,8,["notification","onMarkedAsdone"])):l("",!0),m.type==="App\\Notifications\\NewSuggestion"?(n(),_(ve,{key:3,notification:m,onMarkedAsdone:x=>c(m)},null,8,["notification","onMarkedAsdone"])):l("",!0),e("div",Ae,[e("button",{onClick:x=>r(m),class:"pl-4 text-neutral-400"},Ce,8,Ne)])]))),128))])):(n(),d("span",Re,a(u.__("No notification")),1))])]),_:1})]))}},Be={class:"md:flex md:flex-shrink-0"},Se={class:"flex w-full items-center justify-between px-4 py-2 md:flex-shrink-0 md:px-12"},Ve={class:"flex items-center justify-end"},qe=["title"],Te={key:3,class:"flex gap-4 uppercase"},ze={__name:"Navbar",setup(o){var s;const i=(s=y().props.auth)==null?void 0:s.user,t=g(!1);return(r,c)=>(n(),d("div",Be,[e("div",Se,[p(f(w),{class:"",href:r.route("home"),title:"Blinest"},{default:k(()=>[p(L,{class:"fill-inherit w-24 lg:w-32"})]),_:1},8,["href"]),p(N,{class:"mt-1 hidden lg:block"}),e("div",Ve,[e("button",{type:"button",onClick:c[0]||(c[0]=v=>t.value=!t.value),class:"lg:hidden"},[p(A,{name:"search",class:"h-5 w-5 mr-4"})]),f(i)?(n(),_(f(w),{key:0,href:r.route("rankings.index"),title:r.__("Rankings")},{default:k(()=>[p(A,{name:"podium",class:"h-5 w-5 mr-4"})]),_:1},8,["href","title"])):l("",!0),e("a",{href:"https://discord.com/invite/uKyVgcxcFa",target:"_blank",title:r.__("Join the Blinest community on Discord"),class:"mr-4 umami--click--discord-button"},[p(z,{name:"discord",class:"h-5 w-5"})],8,qe),f(i)?(n(),_(Me,{key:1,class:"mr-4"})):l("",!0),p(D,{class:"mr-4"}),f(i)?(n(),_(O,{key:2})):l("",!0),f(i)?l("",!0):(n(),d("div",Te,[p(f(w),{href:r.route("login"),title:r.__("Login")},{default:k(()=>[h(a(r.__("Login")),1)]),_:1},8,["href","title"]),p(f(w),{href:r.route("register"),class:"hidden lg:block",title:r.__("Register")},{default:k(()=>[h(a(r.__("Register")),1)]),_:1},8,["href","title"])]))])]),e("div",null,[q(p(N,{class:"m-2"},null,512),[[T,t.value]])])]))}};export{ze as _};
