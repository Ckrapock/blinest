import{h as s,k as w,B as j,o as d,b as h,d as n,u as k,H as b,w as v,F as E,a as t,t as _,g as p,A as y}from"./app.6178a65b.js";import{_ as R}from"./AppLayout.ae28919a.js";import{S}from"./Spinner.968ed9fc.js";import x from"./Player.02ce2040.js";import B from"./UserInput.c362000e.js";import F from"./Answers.8f06f118.js";import C from"./Ranking.8af2a7c4.js";import N from"./Controls.a2f07569.js";import V from"./FinishedRoundModal.04f5849e.js";import"./Icon.b321052c.js";import"./plugin-vue_export-helper.21dcd24c.js";import"./LanguageSwitcher.06c97ed0.js";import"./TextInput.8c9ba0ba.js";import"./pickBy.99845672.js";import"./debounce.f0f8076e.js";import"./_defineProperty.a10c78c5.js";import"./Card.2e30a0a3.js";import"./Modal.ee4257c7.js";const T={key:0,class:"flex h-full w-full items-center justify-center"},A={key:0},D={class:"prose mb-4 dark:prose-invert"},H={class:"mb-8"},L={class:"grid md:grid-cols-2 md:gap-8"},lo={__name:"Show",props:{room:Object},setup(l){const f=l,e=`rooms.${f.room.id}`,u=s(null),m=s(!1),a=s(null),c=s(null),r=s(!1);w(()=>{Echo.join(e).here(o=>{console.log(o),a.value=o,g()}).joining(o=>{a.value.push(o)}).leaving(o=>{a.value=a.value.filter(i=>i.id!==o.id)}).error(o=>{console.error(o)})}),j(()=>{Echo.leave(e)});const g=()=>{axios.get(`/rooms/${f.room.id}/joined`).then(()=>{m.value=!0,$()})},$=()=>{Echo.channel(e).listen("RoundStarted",o=>{console.warn("Round started"),u.value=o.round,r.value=!1}),Echo.channel(e).listen("RoundFinished",o=>{console.warn("Round finished"),u.value=null,r.value=!0}),Echo.channel(e).listen("TrackPlayed",o=>{c.value=o.data})};return(o,i)=>(d(),h(E,null,[n(k(b),{title:l.room.name},null,8,["title"]),n(R,null,{default:v(()=>[m.value?p("",!0):(d(),h("div",T,[n(S),t("h2",null,_(o.__("Loading"))+"...",1)])),n(y,{name:"slide-right"},{default:v(()=>[m.value?(d(),h("div",A,[t("article",D,[t("h2",null,_(l.room.name),1)]),t("div",H,[n(x,{room:l.room,channel:e},null,8,["room"]),n(B,{data:c.value,channel:e},null,8,["data"])]),t("div",L,[n(F,{class:"mb-8",users:a.value,channel:e},null,8,["users"]),n(C,{class:"mb-8",users:a.value,channel:e,data:c.value},null,8,["users","data"])]),n(N,{channel:e,room:l.room,round:u.value},null,8,["room","round"])])):p("",!0)]),_:1}),n(V,{show:r.value,onClose:i[0]||(i[0]=M=>r.value=!1)},null,8,["show"])]),_:1})],64))}};export{lo as default};
