import{h as b,q as g,i as A,o as e,c as x,w as c,a as o,t as n,d as w,b as t,F as y,y as k,g as f,m as v}from"./app.d9a699ed.js";import{_ as V}from"./TextInput.35f3ac91.js";import{_ as $}from"./LanguageSwitcher.07dcd9f6.js";import{C}from"./Card.3bb00577.js";import{d as z}from"./debounce.465b782b.js";const B={class:"text-xl font-bold"},N={key:0,class:"max-w-50 max-h-80 overflow-y-auto"},j=["src"],S={class:"mr-4"},L=["title","onClick"],D={key:0},F=["src"],O=["title","onClick"],H=o("svg",{xmlns:"http://www.w3.org/2000/svg",class:"h-6 w-6",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor","stroke-width":"2"},[o("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M17 16l4-4m0 0l-4-4m4 4H7m6 4v1a3 3 0 01-3 3H6a3 3 0 01-3-3V7a3 3 0 013-3h4a3 3 0 013 3v1"})],-1),P=[H],q={key:1,class:"my-2 text-sm text-neutral-400"},oe={__name:"ModeratorsManager",props:{room:Object},setup(r){const p=r,i=b(""),_=b(!1),m=b(null),s=g({user_id:null});A(i,z(()=>{_.value=!0,axios.get("/api/users",{params:{search:i.value}}).then(l=>{m.value=l.data.users,_.value=!1})},300));const u=l=>{s.transform(h=>({user_id:l.id})).post(`/rooms/${p.room.id}/moderators/attach`,{preserveScroll:!0})},d=l=>{s.transform(h=>({user_id:l.id})).delete(`/rooms/${p.room.id}/moderators/detach`,{preserveScroll:!0})};return(l,h)=>(e(),x(C,null,{header:c(()=>[o("h3",B,n(l.__("Moderators")),1)]),default:c(()=>[w($,{placement:"bottom-start",class:"mb-2 border-b pb-2",onClosed:h[1]||(h[1]=a=>i.value="")},{default:c(()=>[w(V,{modelValue:i.value,"onUpdate:modelValue":h[0]||(h[0]=a=>i.value=a),"prepend-icon":"search","append-icon":"cheveron-down",loading:_.value,placeholder:l.__("Add a moderator")},null,8,["modelValue","loading","placeholder"])]),dropdown:c(()=>[m.value&&m.value.data.length?(e(),t("ul",N,[(e(!0),t(y,null,k(m.value.data,a=>(e(),t("li",{key:a.id,class:"flex items-center p-2"},[a.photo?(e(),t("img",{key:0,class:"-my-2 mr-2 block h-8 w-8 rounded-full",src:a.photo},null,8,j)):f("",!0),o("span",S,n(a.name),1),o("button",{class:"ml-auto rounded-full bg-blue-500 py-1 px-2 text-xs uppercase",title:l.__("Add"),onClick:M=>u(a)},n(l.__("Add")),9,L)]))),128))])):f("",!0)]),_:1}),r.room.moderators&&r.room.moderators.length?(e(),t("ul",D,[(e(!0),t(y,null,k(r.room.moderators,a=>(e(),t("li",{key:a.id,class:"flex items-center rounded p-3 hover:bg-neutral-200"},[a.photo?(e(),t("img",{key:0,class:"-my-2 mr-2 block h-8 w-8 rounded-full",src:a.photo},null,8,F)):f("",!0),v(" "+n(a.name)+" ",1),o("button",{class:"ml-auto text-red-500",title:l.__("Remove"),onClick:M=>d(a)},P,8,O)]))),128))])):(e(),t("p",q,n(l.__("No moderator")),1))]),_:1}))}},E={class:"text-xl font-bold"},R={type:"button",class:"btn-secondary"},T={key:0,class:"max-w-50 max-h-80 overflow-y-auto"},U={class:"mr-4"},G=["title","onClick"],I=o("svg",{xmlns:"http://www.w3.org/2000/svg",class:"mr-1 h-6 w-6",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor","stroke-width":"2"},[o("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M13.828 10.172a4 4 0 00-5.656 0l-4 4a4 4 0 105.656 5.656l1.102-1.101m-.758-4.899a4 4 0 005.656 0l4-4a4 4 0 00-5.656-5.656l-1.1 1.1"})],-1),J={key:0},K=["title","onClick"],Q=o("svg",{xmlns:"http://www.w3.org/2000/svg",class:"mr-1 h-6 w-6",viewBox:"0 0 24 24"},[o("g",null,[o("path",{fill:"currentColor",d:"M17.657 14.828l-1.414-1.414L17.657 12A4 4 0 1 0 12 6.343l-1.414 1.414-1.414-1.414 1.414-1.414a6 6 0 0 1 8.485 8.485l-1.414 1.414zm-2.829 2.829l-1.414 1.414a6 6 0 1 1-8.485-8.485l1.414-1.414 1.414 1.414L6.343 12A4 4 0 1 0 12 17.657l1.414-1.414 1.414 1.414zm0-9.9l1.415 1.415-7.071 7.07-1.415-1.414 7.071-7.07zM5.775 2.293l1.932-.518L8.742 5.64l-1.931.518-1.036-3.864zm9.483 16.068l1.931-.518 1.036 3.864-1.932.518-1.035-3.864zM2.293 5.775l3.864 1.036-.518 1.931-3.864-1.035.518-1.932zm16.068 9.483l3.864 1.035-.518 1.932-3.864-1.036.518-1.931z"})])],-1),W={key:1,class:"my-2 text-sm text-neutral-400"},se={__name:"PlaylistsManager",props:{room:Object,playlists:Object},setup(r){const p=r,i=g({playlist_id:null}),_=s=>{i.transform(u=>({playlist_id:s.id})).post(`/rooms/${p.room.id}/playlists/attach`,{preserveScroll:!0})},m=s=>{i.transform(u=>({playlist_id:s.id})).delete(`/rooms/${p.room.id}/playlists/detach`,{preserveScroll:!0})};return(s,u)=>(e(),x(C,null,{header:c(()=>[o("h3",E,n(s.__("Playlists")),1)]),default:c(()=>[w($,{placement:"bottom-start",class:"mb-2 border-b pb-2",onClosed:u[0]||(u[0]=d=>s.search="")},{default:c(()=>[o("button",R,n(s.__("Attach a playlist")),1)]),dropdown:c(()=>[r.playlists&&r.playlists.length?(e(),t("ul",T,[(e(!0),t(y,null,k(r.playlists,d=>(e(),t("li",{key:d.id,class:"flex items-center p-2"},[o("span",U,n(d.name),1),o("button",{class:"ml-auto flex items-center rounded-full bg-blue-500 py-1 px-2 text-xs uppercase",title:s.__("Add"),onClick:l=>_(d)},[I,v(" "+n(s.__("Attach")),1)],8,G)]))),128))])):f("",!0)]),_:1}),r.room.playlists&&r.room.playlists.length?(e(),t("ul",J,[(e(!0),t(y,null,k(r.room.playlists,d=>(e(),t("li",{key:d.id,class:"flex items-center rounded p-3 hover:bg-neutral-200"},[v(n(d.name)+" ",1),o("button",{class:"ml-auto flex items-center text-red-500",title:s.__("Detach"),onClick:l=>m(d)},[Q,v(" "+n(s.__("Detach")),1)],8,K)]))),128))])):(e(),t("p",W,n(s.__("No playlist")),1))]),_:1}))}};export{oe as _,se as a};
