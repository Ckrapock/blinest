import{q as y,j as S,l as $,C as E,o as _,b as p,d,u as e,w as i,F as k,H as M,a as t,L as B,h as u,t as n,g as L,m as h,y as N,c as v,E as c,K as b,J as P}from"./app.2ccf841f.js";import{_ as D}from"./AppLayout.59afe51e.js";import{F as T}from"./FileInput.0bdf4496.js";import{_ as V}from"./TextInput.c49deda3.js";import{_ as G}from"./TextareaInput.8e6b7e85.js";import{_ as R}from"./SelectInput.7600b19c.js";import{C as x}from"./CheckboxInput.4177a27b.js";import{L as w}from"./LoadingButton.0800d954.js";import{_ as j,a as A}from"./PlaylistsManager.19870007.js";import{C as U}from"./Card.53d0f134.js";import"./_defineProperty.09f4b3d5.js";import"./LanguageSwitcher.cb537353.js";import"./plugin-vue_export-helper.21dcd24c.js";import"./Dropdown.6ea7b926.js";import"./Icon.6689216d.js";import"./Navbar.f548c814.js";import"./pickBy.83d2d581.js";import"./debounce.1e54c607.js";import"./SocialIcon.895ec767.js";import"./Tip.c9ec7ad4.js";const H={class:"mb-8 text-3xl font-bold"},I={class:"flex flex-wrap gap-4"},O={class:"flex w-full flex-col xl:w-1/4"},q={class:"text-xl font-bold"},J=["onSubmit"],K={class:"flex"},z={class:"flex flex-wrap"},Q=["value"],W={key:1},X={class:"flex-1"},Y={class:"text-xl font-bold"},Z=["onSubmit"],ee={class:"flex w-full flex-wrap"},oe={for:"tracks_by_round-range",class:"mb-2 block text-sm font-medium text-gray-900 dark:text-gray-300"},re={class:"font-bold"},se=["error"],ae={for:"track_duration-range",class:"mb-2 block text-sm font-medium text-gray-900 dark:text-gray-300"},te={class:"font-bold"},le=["error"],ne={for:"pause_between_tracks-range",class:"mb-2 block text-sm font-medium text-gray-900 dark:text-gray-300"},de={class:"font-bold"},ie=["error"],me={for:"pause_between_rounds-range",class:"mb-2 block text-sm font-medium text-gray-900 dark:text-gray-300"},ue={class:"font-bold"},_e=["error"],pe={class:"flex w-full flex-wrap"},Ne={__name:"Edit",props:{room:Object,categories:Array,available_playlists:Array},setup(m){const l=m,o=y({_method:"put",name:l.room.name,description:l.room.description,category_id:l.room.category_id,is_public:l.room.is_public,is_pro:l.room.is_pro,is_random:l.room.is_random,is_active:l.room.is_active,is_chat_active:l.room.is_chat_active,discord_webhook_url:l.room.discord_webhook_url,color:l.room.color,has_password:!!l.room.password,password:l.room.password,tracks_by_round:l.room.tracks_by_round,track_duration:l.room.track_duration,pause_between_tracks:l.room.pause_between_tracks,pause_between_rounds:l.room.pause_between_rounds,photo:null,playlists:l.room_playlists}),g=()=>{o.post(route("rooms.update",l.room.id))},C=y({}),f=S(!1),F=()=>{C.post(route("rooms.generate.mosaic",l.room.id),{preserveState:!0,preserveScroll:!0,onSuccess:()=>{f.value=!0}})};return $(()=>{Echo.private(`rooms.${l.room.id}`).listen("MosaicGenerated",r=>{console.log(r.room),f.value=!1})}),E(()=>{Echo.leave(`rooms.${l.room.id}`)}),(r,a)=>(_(),p(k,null,[d(e(M),{title:r.__("Edit Room")},null,8,["title"]),d(D,null,{default:i(()=>[t("h1",H,[d(e(B),{href:r.route("rooms.index")},{default:i(()=>[u(n(r.__("Rooms")),1)]),_:1},8,["href"]),u(" / "+n(m.room.name),1)]),t("div",I,[t("div",O,[d(U,{class:"mb-4"},{header:i(()=>[t("h3",q,n(r.__("Room")),1)]),footer:i(()=>[m.room.deleted_at?L("",!0):(_(),p("button",{key:0,class:"text-sm text-red-500 hover:underline",tabindex:"-1",type:"button",onClick:a[4]||(a[4]=(...s)=>r.destroy&&r.destroy(...s))},n(r.__("Delete")),1)),d(w,{loading:e(o).processing,class:"btn-primary ml-auto",form:"roomForm",type:"submit"},{default:i(()=>[u(n(r.__("Update")),1)]),_:1},8,["loading"])]),default:i(()=>[t("form",{onSubmit:h(g,["prevent"]),id:"roomForm"},[t("div",K,[t("div",z,[d(V,{modelValue:e(o).name,"onUpdate:modelValue":a[0]||(a[0]=s=>e(o).name=s),error:e(o).errors.name,class:"mb-4 w-full",label:r.__("Name")},null,8,["modelValue","error","label"]),d(G,{modelValue:e(o).description,"onUpdate:modelValue":a[1]||(a[1]=s=>e(o).description=s),error:e(o).errors.description,class:"mb-4 w-full",label:r.__("Description")},null,8,["modelValue","error","label"]),d(R,{modelValue:e(o).category_id,"onUpdate:modelValue":a[2]||(a[2]=s=>e(o).category_id=s),error:e(o).errors.category_id,class:"mb-4 w-full",label:r.__("Category")},{default:i(()=>[(_(!0),p(k,null,N(m.categories,s=>(_(),p("option",{key:s.id,value:s.id},n(s.name),9,Q))),128))]),_:1},8,["modelValue","error","label"]),m.room.is_pro||m.room.is_public?(_(),v(T,{key:0,modelValue:e(o).photo,"onUpdate:modelValue":a[3]||(a[3]=s=>e(o).photo=s),error:e(o).errors.photo,class:"mb-4 w-full",type:"file",accept:"image/*",label:r.__("Photo")},null,8,["modelValue","error","label"])):(_(),p("div",W,[f.value?(_(),v(w,{key:1,loading:!0,class:"text-xs text-yellow-600"},{default:i(()=>[u(n(r.__("Generating new thumbnail")),1)]),_:1})):(_(),p("button",{key:0,type:"button",class:"btn-secondary",onClick:F},n(r.__("Generate a new thumbnail")),1))]))])])],40,J)]),_:1}),d(j,{room:m.room},null,8,["room"])]),t("div",X,[d(U,{class:"mb-4"},{header:i(()=>[t("h2",Y,n(r.__("Options")),1)]),footer:i(()=>[d(w,{loading:e(o).processing,class:"btn-primary ml-auto",form:"optionsForm",type:"submit"},{default:i(()=>[u(n(r.__("Update")),1)]),_:1},8,["loading"])]),default:i(()=>[t("form",{onSubmit:h(g,["prevent"]),id:"optionsForm",class:"flex flex-wrap"},[t("div",ee,[t("label",oe,[u(n(r.__("Tracks by round"))+" : ",1),t("span",re,n(e(o).tracks_by_round),1)]),c(t("input",{id:"tracks_by_round-range",type:"range",min:"1",max:"30","onUpdate:modelValue":a[5]||(a[5]=s=>e(o).tracks_by_round=s),error:e(o).errors.tracks_by_round,step:"1",class:"mb-6 h-2 w-full cursor-pointer appearance-none rounded-lg bg-neutral-700"},null,8,se),[[b,e(o).tracks_by_round]]),t("label",ae,[u(n(r.__("Track duration"))+" : ",1),t("span",te,n(e(o).track_duration)+" "+n(r.__("seconds")),1)]),c(t("input",{id:"track_duration-range",type:"range",min:"5",max:"30","onUpdate:modelValue":a[6]||(a[6]=s=>e(o).track_duration=s),error:e(o).errors.track_duration,step:"1",class:"mb-6 h-2 w-full cursor-pointer appearance-none rounded-lg bg-neutral-700"},null,8,le),[[b,e(o).track_duration]]),t("label",ne,[u(n(r.__("Pause between tracks"))+" : ",1),t("span",de,n(e(o).pause_between_tracks)+" "+n(r.__("seconds")),1)]),c(t("input",{id:"pause_between_tracks-range",type:"range",min:"0",max:"30","onUpdate:modelValue":a[7]||(a[7]=s=>e(o).pause_between_tracks=s),error:e(o).errors.pause_between_tracks,step:"1",class:"mb-6 h-2 w-full cursor-pointer appearance-none rounded-lg bg-neutral-700"},null,8,ie),[[b,e(o).pause_between_tracks]]),t("label",me,[u(n(r.__("Pause between tracks"))+" : ",1),t("span",ue,n(e(o).pause_between_rounds)+" "+n(r.__("seconds")),1)]),c(t("input",{id:"pause_between_rounds-range",type:"range",min:"0",max:"60","onUpdate:modelValue":a[8]||(a[8]=s=>e(o).pause_between_rounds=s),error:e(o).errors.pause_between_rounds,step:"1",class:"mb-6 h-2 w-full cursor-pointer appearance-none rounded-lg bg-neutral-700"},null,8,_e),[[b,e(o).pause_between_rounds]])]),t("div",pe,[d(x,{modelValue:e(o).is_chat_active,"onUpdate:modelValue":a[9]||(a[9]=s=>e(o).is_chat_active=s),error:e(o).errors.is_chat_active,class:"w-full pr-4 pb-4 md:w-1/2",label:r.__("Chatbox")},null,8,["modelValue","error","label"]),d(x,{modelValue:e(o).has_password,"onUpdate:modelValue":a[10]||(a[10]=s=>e(o).has_password=s),class:"w-full pr-4 pb-4 md:w-1/2",label:r.__("Password")},null,8,["modelValue","label"])]),c(d(V,{modelValue:e(o).password,"onUpdate:modelValue":a[11]||(a[11]=s=>e(o).password=s),error:e(o).errors.password,class:"pb-6",type:"password",autocomplete:"new-password",label:r.__("Password")},null,8,["modelValue","error","label"]),[[P,e(o).has_password]])],40,Z)]),_:1}),d(A,{room:m.room,playlists:m.available_playlists},null,8,["room","playlists"])])])]),_:1})],64))}};export{Ne as default};
