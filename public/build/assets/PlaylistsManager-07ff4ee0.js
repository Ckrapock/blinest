import{k as b,P as x,l as A,o as e,h as g,w as d,b as t,t as o,a as v,c as l,F as w,v as k,g as y,d as m,u as B,n as V}from"./app-f6824ecf.js";import{_ as z}from"./TextInput-4085333a.js";import{_ as $}from"./Dropdown-b8d92112.js";import{C}from"./Card-261bd2f6.js";import{d as j}from"./debounce-d2fd0fa0.js";import{T as N}from"./Tip-b30cc793.js";const S={class:"text-xl font-bold"},L={key:0,class:"max-w-50 max-h-80 overflow-y-auto"},T=["src"],D={class:"mr-4"},O=["title","onClick"],P={key:0},F=["src"],H=["title","onClick"],R=t("svg",{xmlns:"http://www.w3.org/2000/svg",class:"h-6 w-6 ml-2",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor","stroke-width":"2"},[t("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M17 16l4-4m0 0l-4-4m4 4H7m6 4v1a3 3 0 01-3 3H6a3 3 0 01-3-3V7a3 3 0 013-3h4a3 3 0 013 3v1"})],-1),E={key:1,class:"my-2 text-sm text-neutral-400"},ie={__name:"ModeratorsManager",props:{room:Object},setup(n){const p=n,c=b(""),f=b(!1),u=b(null),s=x({user_id:null});A(c,j(()=>{f.value=!0,axios.get("/api/users",{params:{search:c.value}}).then(a=>{u.value=a.data.users,f.value=!1})},300));const h=a=>{s.transform(_=>({user_id:a.id})).post(`/rooms/${p.room.id}/moderators/attach`,{preserveScroll:!0})},i=a=>{s.transform(_=>({user_id:a.id})).delete(`/rooms/${p.room.id}/moderators/detach`,{preserveScroll:!0})};return(a,_)=>(e(),g(C,null,{header:d(()=>[t("h3",S,o(a.__("Moderators")),1)]),default:d(()=>[v($,{placement:"bottom-start",class:"mb-2 pb-2",onClosed:_[1]||(_[1]=r=>c.value="")},{default:d(()=>[v(z,{modelValue:c.value,"onUpdate:modelValue":_[0]||(_[0]=r=>c.value=r),"prepend-icon":"search","append-icon":"cheveron-down",loading:f.value,placeholder:a.__("Add a moderator")},null,8,["modelValue","loading","placeholder"])]),dropdown:d(()=>[u.value&&u.value.data.length?(e(),l("ul",L,[(e(!0),l(w,null,k(u.value.data,r=>(e(),l("li",{key:r.id,class:"flex items-center p-2"},[r.photo?(e(),l("img",{key:0,class:"-my-2 mr-2 block h-8 w-8 rounded-full",src:r.photo},null,8,T)):y("",!0),t("span",D,o(r.name),1),t("button",{class:"ml-auto rounded-full bg-blue-500 py-1 px-2 text-xs uppercase",title:a.__("Add"),onClick:M=>h(r)},o(a.__("Add")),9,O)]))),128))])):y("",!0)]),_:1}),n.room.moderators&&n.room.moderators.length?(e(),l("ul",P,[(e(!0),l(w,null,k(n.room.moderators,r=>(e(),l("li",{key:r.id,class:"flex items-center rounded p-3"},[r.photo?(e(),l("img",{key:0,class:"-my-2 mr-2 block h-8 w-8 rounded-full",src:r.photo},null,8,F)):y("",!0),m(" "+o(r.name)+" ",1),t("button",{class:"ml-auto text-red-500 flex",title:a.__("Remove"),onClick:M=>i(r)},[m(o(a.__("Remove"))+" ",1),R],8,H)]))),128))])):(e(),l("p",E,o(a.__("No moderator")),1))]),_:1}))}},I={class:"flex w-full items-center justify-between"},U={class:"text-xl font-bold"},q={class:"flex items-center"},G={type:"button",class:"btn-secondary"},J={key:0,class:"max-w-50 max-h-80 overflow-y-auto"},K={class:"mr-4"},Q=["title","onClick"],W=t("svg",{xmlns:"http://www.w3.org/2000/svg",class:"mr-1 h-6 w-6",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor","stroke-width":"2"},[t("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M13.828 10.172a4 4 0 00-5.656 0l-4 4a4 4 0 105.656 5.656l1.102-1.101m-.758-4.899a4 4 0 005.656 0l4-4a4 4 0 00-5.656-5.656l-1.1 1.1"})],-1),X=t("br",null,null,-1),Y={key:1},Z=["title","onClick"],ee=t("svg",{xmlns:"http://www.w3.org/2000/svg",class:"mr-1 h-6 w-6",viewBox:"0 0 24 24"},[t("g",null,[t("path",{fill:"currentColor",d:"M17.657 14.828l-1.414-1.414L17.657 12A4 4 0 1 0 12 6.343l-1.414 1.414-1.414-1.414 1.414-1.414a6 6 0 0 1 8.485 8.485l-1.414 1.414zm-2.829 2.829l-1.414 1.414a6 6 0 1 1-8.485-8.485l1.414-1.414 1.414 1.414L6.343 12A4 4 0 1 0 12 17.657l1.414-1.414 1.414 1.414zm0-9.9l1.415 1.415-7.071 7.07-1.415-1.414 7.071-7.07zM5.775 2.293l1.932-.518L8.742 5.64l-1.931.518-1.036-3.864zm9.483 16.068l1.931-.518 1.036 3.864-1.932.518-1.035-3.864zM2.293 5.775l3.864 1.036-.518 1.931-3.864-1.035.518-1.932zm16.068 9.483l3.864 1.035-.518 1.932-3.864-1.036.518-1.931z"})])],-1),te={key:2,class:"my-2 text-sm text-neutral-400"},de={__name:"PlaylistsManager",props:{room:Object,playlists:Object},setup(n){const p=n,c=x({playlist_id:null}),f=s=>{c.transform(h=>({playlist_id:s.id})).post(`/rooms/${p.room.id}/playlists/attach`,{preserveScroll:!0})},u=s=>{c.transform(h=>({playlist_id:s.id})).delete(`/rooms/${p.room.id}/playlists/detach`,{preserveScroll:!0})};return(s,h)=>(e(),g(C,null,{header:d(()=>[t("div",I,[t("h3",U,o(s.__("Playlists")),1),t("div",q,[v($,{placement:"bottom-start",class:"mr-2",onClosed:h[0]||(h[0]=i=>s.search="")},{default:d(()=>[t("button",G,o(s.__("Attach a playlist")),1)]),dropdown:d(()=>[n.playlists&&n.playlists.length?(e(),l("ul",J,[(e(!0),l(w,null,k(n.playlists,i=>(e(),l("li",{key:i.id,class:"flex items-center p-2"},[t("span",K,o(i.name),1),t("button",{class:"ml-auto flex items-center rounded-full bg-blue-500 py-1 px-2 text-xs uppercase",title:s.__("Add"),onClick:a=>f(i)},[W,m(" "+o(s.__("Attach")),1)],8,Q)]))),128))])):y("",!0)]),_:1}),v(B(V),{href:"/playlists/create",class:"btn-secondary"},{default:d(()=>[m(o(s.__("Create a playlist")),1)]),_:1})])])]),default:d(()=>[n.room.playlists.length?y("",!0):(e(),g(N,{key:0},{default:d(()=>[m(o(s.__("The room must be associated with one or more playlists to work.")),1),X,m(" "+o(s.__("It is possible to use the official Blinest playlists or to create your own playlists.")),1)]),_:1})),n.room.playlists&&n.room.playlists.length?(e(),l("ul",Y,[(e(!0),l(w,null,k(n.room.playlists,i=>(e(),l("li",{key:i.id,class:"flex items-center rounded p-3"},[m(o(i.name)+" ",1),t("button",{class:"ml-auto flex items-center text-red-500",title:s.__("Detach"),onClick:a=>u(i)},[ee,m(" "+o(s.__("Detach")),1)],8,Z)]))),128))])):(e(),l("p",te,o(s.__("No playlist")),1))]),_:1}))}};export{ie as _,de as a};
