import{j as c,l as _,C as f,o as l,c as w,w as v,D as b,u as g,a as o,b as u,t as a,g as i,d as x,s as y,L as p}from"./app.2ccf841f.js";const k={class:"relative h-full w-full"},B={key:0,class:"ribbon truncate text-xs"},C=["title"],z={class:"flex items-center"},j={key:0,class:"mr-1 font-bold text-orange-400"},P=["title"],V=o("path",{"fill-rule":"evenodd",d:"M12 1.5a5.25 5.25 0 00-5.25 5.25v3a3 3 0 00-3 3v6.75a3 3 0 003 3h10.5a3 3 0 003-3v-6.75a3 3 0 00-3-3v-3c0-2.9-2.35-5.25-5.25-5.25zm3.75 8.25v-3a3.75 3.75 0 10-7.5 0v3h7.5z","clip-rule":"evenodd"},null,-1),E={key:0,xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"currentColor",class:"mr-1 h-4 w-4 animate-pulse"},L=o("path",{"fill-rule":"evenodd",d:"M4.5 5.653c0-1.426 1.529-2.33 2.779-1.643l11.54 6.348c1.295.712 1.295 2.573 0 3.285L7.28 19.991c-1.25.687-2.779-.217-2.779-1.643V5.653z","clip-rule":"evenodd"},null,-1),M=[L],N={class:"font-bold"},R={class:"absolute bottom-0 flex w-full items-center justify-between rounded-b bg-neutral-900 p-2 text-sm uppercase text-gray-100"},S={class:"truncate font-bold"},$={class:"flex items-center"},F={__name:"Room",props:{room:Object},setup(t){const n=t,m=`rooms.${n.room.id}`,h=c(null),s=c(null),d=c(n.room.is_playing),r=c(n.room.users_count);return _(()=>{Echo.channel(m).listen("RoundStarted",e=>{r.value=e.round.room.users_count,d.value=!0,s.value=e.round}).listen("TrackPlayed",e=>{n.room.value=e.room,r.value=e.room.users_count,s.value=e.round,h.value=e.track}).listen("RoundFinished",e=>{r.value=e.round.room.users_count,d.value=!1,s.value=e.round,s.value.current=0})}),f(()=>{Echo.leave(m)}),(e,D)=>(l(),w(g(p),{href:`/rooms/${t.room.id}`,class:"relative flex h-48 w-full flex-col items-center justify-center rounded-md bg-neutral-800 bg-contain bg-center transition duration-100 ease-in-out hover:z-10 hover:scale-110 hover:grayscale-0",style:b(`background-image: url(${t.room.photo_src||t.room.mosaic});`)},{default:v(()=>[o("article",k,[t.room.is_public?i("",!0):(l(),u("div",B,"@"+a(t.room.owner.name),1)),o("div",{class:"absolute top-0 left-0 w-auto rounded-br-md rounded-tl-md bg-neutral-700 text-white py-1 px-2 text-sm ease-in-out hover:scale-110",title:e.__("Players")},[o("div",z,[t.room.password?(l(),u("span",j,[(l(),u("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"currentColor",class:"h-4 w-4",title:e.__("Password protected")},[o("title",null,a(e.__("Password protected")),1),V],8,P))])):i("",!0),x(y,{name:"slide-fade"},{default:v(()=>[d.value?(l(),u("svg",E,M)):i("",!0)]),_:1}),o("span",N,a(r.value),1)])],8,C),o("div",R,[o("span",S,a(t.room.name),1),o("div",$,a(s.value?s.value.current:t.room.current_track_index)+" / "+a(t.room.tracks_by_round),1)])])]),_:1},8,["href","style"]))}};export{F as default};
