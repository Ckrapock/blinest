import{k as m,q as x,L as S,c as f,a as r,w as o,f as w,F as v,o as i,b as s,h as g,d as c,t as _,g as $,s as b}from"./app-d721267d.js";import{C as y}from"./Card-73e0c1e9.js";import{_ as B}from"./Modal-50313139.js";import R from"./EditOptionsForm-c447490a.js";import{L as C}from"./LoadingButton-c26c9090.js";import"./_plugin-vue_export-helper-c27b6911.js";import"./TextInput-09144107.js";import"./Icon-97e692a8.js";import"./v4-cf522c50.js";import"./CheckboxInput-7662c47b.js";const O={class:"flex flex-col items-center gap-4 text-sm lg:flex-row lg:justify-between"},N=s("div",null,[s("div",{class:"mx-auto flex flex-wrap items-center gap-4"},[s("span",{class:"uppercase text-neutral-500"},"Controls")])],-1),V={class:"flex items-center gap-4"},U={__name:"Controls",props:{channel:String,room:Object,round:[Object,Boolean]},setup(a){const e=a,u=m(!1),d=m(!1),n=m(!1),h=()=>{d.value=!0,b.post(`/rounds/${e.round.id}/stop`,{preserveScroll:!0,preserveState:!1})},k=()=>{u.value=!0,b.post(`/rooms/${e.room.id}/start`,{preserveScroll:!0,preserveState:!1})};return x(()=>{Echo.channel(e.channel).listen("RoundStarted",()=>{u.value=!1,e.room.is_playing=!0}).listen("RoundFinished",l=>{d.value=!1,e.room.is_playing=!1})}),S(()=>{Echo.leave(e.channel)}),(l,t)=>(i(),f(v,null,[r(y,{class:w(l.$attrs.class)},{default:o(()=>[s("div",O,[N,s("div",V,[s("button",{type:"button",class:"btn-secondary btn-sm",onClick:t[0]||(t[0]=p=>n.value=!0)},"Options"),a.room.is_autostart?$("",!0):(i(),f(v,{key:0},[a.room.is_playing?(i(),g(C,{key:0,loading:d.value,type:"button",class:"btn-danger btn-sm",onClick:h},{default:o(()=>[c(_(l.__("Stop round")),1)]),_:1},8,["loading"])):(i(),g(C,{key:1,type:"button",loading:u.value,class:"btn-primary btn-sm",onClick:k},{default:o(()=>[c(_(l.__("Start round")),1)]),_:1},8,["loading"]))],64))])])]),_:1},8,["class"]),r(B,{show:n.value,onClose:t[2]||(t[2]=p=>n.value=!1)},{default:o(()=>[r(y,null,{header:o(()=>[c(" Options de la room ")]),default:o(()=>[r(R,{room:a.room,modal:!0,onClose:t[1]||(t[1]=p=>n.value=!1)},null,8,["room"])]),_:1})]),_:1},8,["show"])],64))}};export{U as default};
