import{J as V,P as k,L as x,c,a,u as e,w as m,F as b,o as u,X as $,b as i,n as h,d as _,t as d,g as p,e as U,v as C,h as y,s as F}from"./app-f6824ecf.js";import{_ as B}from"./AppLayout-682c8b6d.js";import{F as N}from"./FileInput-e3a47611.js";import{_ as E}from"./TextInput-4085333a.js";import{_ as L}from"./TextareaInput-2b4b2789.js";import{_ as P}from"./SelectInput-aa3e4f90.js";import{L as R}from"./LoadingButton-7c96c2e4.js";import{_ as D,a as I}from"./PlaylistsManager-07ff4ee0.js";import{C as w}from"./Card-261bd2f6.js";import{T as S}from"./Tip-b30cc793.js";import{_ as T}from"./Share-45a2bb62.js";import"./_defineProperty-98183d58.js";import"./isSymbol-363e1f0a.js";import A from"./EditOptionsForm-32b781f5.js";import"./LanguageSwitcher-d168d683.js";import"./_plugin-vue_export-helper-c27b6911.js";import"./Dropdown-b8d92112.js";import"./Icon-1ce38a62.js";import"./Navbar-c61313dc.js";import"./throttle-b11e308e.js";import"./debounce-d2fd0fa0.js";import"./SocialIcon-b495e5c3.js";import"./v4-cf522c50.js";import"./Modal-5b330035.js";import"./CheckboxInput-edaa6594.js";const J={class:"mb-8 text-3xl font-bold flex items-center gap-2"},O={class:"flex flex-wrap gap-4"},j={class:"flex w-full flex-col xl:w-1/4"},z={class:"text-xl font-bold"},M=["onSubmit"],X={class:"flex"},q={class:"flex flex-wrap"},G=["value"],H={class:"flex-1"},K={class:"text-xl font-bold"},Vo={__name:"Edit",props:{room:Object,categories:Array,available_playlists:Array},setup(r){const o=r,f=V().props.auth.user,t=k({_method:"put",name:o.room.name,description:o.room.description,category_id:o.room.category_id,is_public:o.room.is_public,is_pro:o.room.is_pro,is_random:o.room.is_random,is_active:o.room.is_active,is_chat_active:o.room.is_chat_active,is_autostart:o.room.is_autostart,discord_webhook_url:o.room.discord_webhook_url,color:o.room.color,has_password:!!o.room.password,password:o.room.password,tracks_by_round:o.room.tracks_by_round,track_duration:o.room.track_duration,pause_between_tracks:o.room.pause_between_tracks,pause_between_rounds:o.room.pause_between_rounds,photo:null,playlists:o.room_playlists}),g=()=>{t.post(route("rooms.update",o.room.id))},v=()=>{confirm("Voules-vous vraiment supprimer cette room ?")&&F.delete(route("rooms.destroy",o.room.id))};return x(()=>{Echo.leave(`rooms.${o.room.id}`)}),(s,n)=>(u(),c(b,null,[a(e($),{title:s.__("Edit Room")},null,8,["title"]),a(B,null,{default:m(()=>[i("h1",J,[a(e(h),{href:s.route("rooms.index")},{default:m(()=>[_(d(s.__("Rooms")),1)]),_:1},8,["href"]),_(" / "+d(r.room.name)+" ",1),a(T,{url:s.route("rooms.show",r.room.slug),class:"w-6 h-6"},null,8,["url"]),a(e(h),{class:"btn-primary ml-auto",href:s.route("rooms.show",r.room.slug)},{default:m(()=>[_(d(s.__("Play")),1)]),_:1},8,["href"])]),i("div",O,[i("div",j,[a(w,{class:"mb-4"},{header:m(()=>[i("h3",z,d(s.__("Room")),1)]),footer:m(()=>[r.room.deleted_at?p("",!0):(u(),c("button",{key:0,class:"text-sm text-red-500 hover:underline",tabindex:"-1",type:"button",onClick:v},d(s.__("Delete")),1)),a(R,{loading:e(t).processing,class:"btn-primary ml-auto",form:"roomForm",type:"submit"},{default:m(()=>[_(d(s.__("Update")),1)]),_:1},8,["loading"])]),default:m(()=>[i("form",{onSubmit:U(g,["prevent"]),id:"roomForm"},[i("div",X,[i("div",q,[a(E,{modelValue:e(t).name,"onUpdate:modelValue":n[0]||(n[0]=l=>e(t).name=l),error:e(t).errors.name,class:"mb-4 w-full",label:s.__("Name")},null,8,["modelValue","error","label"]),a(L,{modelValue:e(t).description,"onUpdate:modelValue":n[1]||(n[1]=l=>e(t).description=l),error:e(t).errors.description,class:"mb-4 w-full",label:s.__("Description")},null,8,["modelValue","error","label"]),a(P,{modelValue:e(t).category_id,"onUpdate:modelValue":n[2]||(n[2]=l=>e(t).category_id=l),error:e(t).errors.category_id,class:"mb-4 w-full",label:s.__("Category")},{default:m(()=>[(u(!0),c(b,null,C(r.categories,l=>(u(),c("option",{key:l.id,value:l.id},d(l.name),9,G))),128))]),_:1},8,["modelValue","error","label"]),r.room.is_pro||r.room.is_public||e(f).permissions.canUploadImage?(u(),y(N,{key:0,modelValue:e(t).photo,"onUpdate:modelValue":n[3]||(n[3]=l=>e(t).photo=l),error:e(t).errors.photo,class:"mb-4 w-full",type:"file",accept:"image/*",label:s.__("Photo")},null,8,["modelValue","error","label"])):p("",!0),!r.room.is_pro&&!r.room.is_public&&!e(f).permissions.canUploadImage?(u(),y(S,{key:1},{default:m(()=>[_(" Pour changer l'image de la room vous devez avoir un score total de 2000 minimum et 3 mois d'anciennetÃ©. ")]),_:1})):p("",!0)])])],40,M)]),_:1}),a(D,{room:r.room},null,8,["room"])]),i("div",H,[a(w,{class:"mb-4"},{header:m(()=>[i("h2",K,d(s.__("Options")),1)]),default:m(()=>[a(A,{room:r.room},null,8,["room"])]),_:1}),a(I,{room:r.room,playlists:r.available_playlists},null,8,["room","playlists"])])])]),_:1})],64))}};export{Vo as default};
