import{P as C,J as y,l as R,s as $,o as n,c as d,b as e,a as p,u as h,I as M,V as S,f as V,t as i,g as c,d as v,w as k,n as w,k as g,q as B,h as f,F as q,v as T,N as L}from"./app-d721267d.js";import{_ as D,L as O,a as E}from"./LanguageSwitcher-882651fe.js";import{_ as A}from"./Icon-97e692a8.js";import{_ as F}from"./TextInput-09144107.js";import{t as I,p as J}from"./throttle-815b75de.js";import{_ as U}from"./Dropdown-1979e914.js";import{S as z}from"./SocialIcon-7b1795d7.js";const H={itemprop:"potentialAction",itemscope:"",itemtype:"https://schema.org/SearchAction"},P=e("meta",{itemprop:"target",content:"https://blinest.com/?search={search_term_string}"},null,-1),N={__name:"SearchRooms",props:{filters:Object},setup(o){var t,s;const a=C({search:(s=(t=y().props)==null?void 0:t.filters)==null?void 0:s.search});return R(a,I(()=>{$.get("/",J(a),{remember:"forget",preserveState:!0})},150),{deep:!0}),(r,l)=>(n(),d("div",{class:V(r.$attrs.class)},[e("form",H,[P,p(F,{class:"text-sm",modelValue:h(a).search,"onUpdate:modelValue":l[0]||(l[0]=_=>h(a).search=_),spellcheck:"false","prepend-icon":"search",placeholder:r.__("Search")+"..."},null,8,["modelValue","placeholder"]),M(e("input",{class:"hidden",itemprop:"query-input",type:"text",name:"search_term_string","onUpdate:modelValue":l[1]||(l[1]=_=>h(a).search=_),required:""},null,512),[[S,h(a).search]])])],2))}},K={key:0,class:"flex-grow"},G={class:"mb-1 border-b pb-1 uppercase text-neutral-500"},Q={class:"my-2 text-sm font-medium"},W={class:"mt-1 flex items-center justify-end"},X={__name:"NewTeamRequest",props:{notification:Object},setup(o){const a=o,t=C({notification_id:a.notification.id}),s=l=>{t.post(`/teams/requests/${a.notification.data.teamRequest.id}/decline`)},r=l=>{t.post(`/teams/requests/${a.notification.data.teamRequest.id}/accept`)};return(l,_)=>o.notification?(n(),d("div",K,[e("h4",G,i(l.__("Team")),1),e("div",Q,i(o.notification.data.message),1),e("div",W,[e("button",{type:"button",onClick:s,class:"btn-danger btn-sm mr-2 opacity-80"},i(l.__("Decline")),1),e("button",{type:"button",onClick:r,class:"btn-primary btn-sm opacity-80"},i(l.__("Accept")),1)])])):c("",!0)}},Y={key:0,class:"flex-grow"},Z={class:"mb-1 border-b pb-1 uppercase text-neutral-500"},ee={class:"my-2 text-sm font-medium"},te=e("br",null,null,-1),se={class:"mt-1 flex items-center justify-end"},oe={__name:"TeamRequestApproved",props:{notification:Object},setup(o){const a=o,t=s=>{$.post(`/users/notifications/${a.notification.id}/read`)};return(s,r)=>o.notification?(n(),d("div",Y,[e("h4",Z,i(s.__("Team"))+" "+i(o.notification.data.team.name),1),e("div",ee,[v(i(s.__("Ta demande a été acceptée!")),1),te]),e("div",se,[e("button",{type:"button",onClick:t,class:"btn-primary btn-sm opacity-80"},i(s.__("Mark as read")),1)])])):c("",!0)}},ne={key:0,class:"flex-grow"},ae={class:"flex justify-between items-center mb-1 border-b pb-1"},ie={class:"uppercase text-red-500 flex items-center font-bold"},re=e("svg",{xmlns:"http://www.w3.org/2000/svg",class:"h-4 w-4 mr-2",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor","stroke-width":"2"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M15 17h5l-1.405-1.405A2.032 2.032 0 0118 14.158V11a6.002 6.002 0 00-4-5.659V5a2 2 0 10-4 0v.341C7.67 6.165 6 8.388 6 11v3.159c0 .538-.214 1.055-.595 1.436L4 17h5m6 0v1a3 3 0 11-6 0v-1m6 0H9"})],-1),le={class:"text-xs text-neutral-400"},ce={class:"my-2 text-sm font-medium"},de=e("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24","stroke-width":"1.5",stroke:"currentColor",class:"w-4 h-4 mr-1"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M4.5 12.75l6 6 9-13.5"})],-1),j={__name:"NewRoomAlert",props:{notification:Object},emits:["markedAsdone"],setup(o,{emit:a}){return(t,s)=>o.notification?(n(),d("div",ne,[e("div",ae,[e("h4",ie,[re,v(" "+i(t.__("Alerte modération")),1)]),e("span",le,i(o.notification.data.created_at),1)]),e("div",ce,[p(h(w),{href:t.route("rooms.show",o.notification.data.room.slug)},{default:k(()=>[v(i(o.notification.data.message),1)]),_:1},8,["href"])]),e("button",{type:"button",class:"btn-primary btn-sm mt-2 ml-auto",onClick:s[0]||(s[0]=r=>t.$emit("markedAsdone"))},[de,v(" "+i(t.__("Done")),1)])])):c("",!0)}},ue={key:0,class:"flex-grow"},me={class:"mb-1 flex items-center justify-between border-b pb-1"},pe=e("h4",{class:"flex items-center font-bold uppercase"},"Suggestion",-1),he={class:"text-xs text-neutral-400"},_e={class:"my-2 whitespace-pre-line text-sm font-medium"},fe={class:"flex text-xs"},ve={class:"font-bold ml-1"},ke={key:0,class:"text-xs"},we=e("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24","stroke-width":"1.5",stroke:"currentColor",class:"w-4 h-4 mr-1"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M4.5 12.75l6 6 9-13.5"})],-1),be={__name:"NewSuggestion",props:{notification:Object},emits:["markedAsdone"],setup(o,{emit:a}){return(t,s)=>o.notification?(n(),d("div",ue,[e("div",me,[pe,e("span",he,i(o.notification.data.created_at),1)]),e("div",_e,i(o.notification.data.message),1),e("span",fe,[v("Envoyée par "+i(o.notification.data.user.name)+" sur ",1),e("span",ve,i(o.notification.data.room.name),1)]),o.notification.data.room.playlists?(n(),d("span",ke,"Playlists : "+i(o.notification.data.room.playlists),1)):c("",!0),e("button",{type:"button",class:"btn-primary btn-sm mt-2 ml-auto",onClick:s[0]||(s[0]=r=>t.$emit("markedAsdone"))},[we,v(" "+i(t.__("Done")),1)])])):c("",!0)}},ge={key:0,class:"absolute top-0 left-0 right-0 flex justify-center z-30 w-full"},ye={class:"my-2 rounded bg-neutral-700 p-2 flex max-w-2xl"},$e={class:"relative"},xe={key:0,class:"absolute -top-2 -right-2 flex h-4 w-4 items-center justify-center truncate rounded-full bg-red-500 p-1 text-xs"},Ae=e("svg",{xmlns:"http://www.w3.org/2000/svg",class:"h-4 w-4",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor","stroke-width":"2"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M15 17h5l-1.405-1.405A2.032 2.032 0 0118 14.158V11a6.002 6.002 0 00-4-5.659V5a2 2 0 10-4 0v.341C7.67 6.165 6 8.388 6 11v3.159c0 .538-.214 1.055-.595 1.436L4 17h5m6 0v1a3 3 0 11-6 0v-1m6 0H9"})],-1),Ne={class:"p-2 font-light"},je={key:0,class:"max-w-xl max-h-96 overflow-y-scroll pr-2"},Ce={class:"justify-end"},Me=["onClick"],Re=e("svg",{xmlns:"http://www.w3.org/2000/svg",class:"h-4 w-4",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor","stroke-width":"2"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M6 18L18 6M6 6l12 12"})],-1),Se=[Re],Ve={key:1},Be={__name:"Notifications",setup(o){const a=y().props.auth.user,t=g(a.notifications),s=g(null);B(()=>{Echo.private("App.Models.User."+a.id).notification(u=>{s.value=u,setTimeout(()=>{s.value=null},3e3),t.value.push(u)})});const r=u=>{_(u),axios.post(`/users/notifications/${u.id}/read`).then(()=>{_(u)})},l=u=>{_(u),$.post(`/users/notifications/${u.id}/done`,{preserveScroll:!0})},_=u=>{t.value=t.value.filter(b=>b.id!==u.id)};return(u,b)=>(n(),d("div",null,[s.value?(n(),d("div",ge,[e("div",ye,[s.value.type==="App\\Notifications\\NewRoomAlert"?(n(),f(j,{key:0,notification:s.value,onMarkedAsdone:b[0]||(b[0]=m=>l(s.value))},null,8,["notification"])):c("",!0)])])):c("",!0),p(U,{placement:"bottom-end",autoClose:!1},{default:k(()=>[e("div",$e,[t.value.length?(n(),d("div",xe,i(t.value.length),1)):c("",!0),Ae])]),dropdown:k(()=>[e("div",Ne,[t.value.length?(n(),d("ul",je,[(n(!0),d(q,null,T(t.value,m=>(n(),d("li",{key:m.id,class:"my-2 rounded bg-neutral-700 p-2 flex"},[m.type==="App\\Notifications\\NewTeamRequest"?(n(),f(X,{key:0,notification:m},null,8,["notification"])):c("",!0),m.type==="App\\Notifications\\TeamRequestApproved"?(n(),f(oe,{key:1,notification:m},null,8,["notification"])):c("",!0),m.type==="App\\Notifications\\NewRoomAlert"?(n(),f(j,{key:2,notification:m,onMarkedAsdone:x=>l(m)},null,8,["notification","onMarkedAsdone"])):c("",!0),m.type==="App\\Notifications\\NewSuggestion"?(n(),f(be,{key:3,notification:m,onMarkedAsdone:x=>l(m)},null,8,["notification","onMarkedAsdone"])):c("",!0),e("div",Ce,[e("button",{onClick:x=>r(m),class:"pl-4 text-neutral-400"},Se,8,Me)])]))),128))])):(n(),d("span",Ve,i(u.__("No notification")),1))])]),_:1})]))}},qe={class:"md:flex md:flex-shrink-0"},Te={class:"flex w-full items-center justify-between px-4 py-2 md:flex-shrink-0 md:px-12"},Le={class:"flex items-center justify-end"},De=["title"],Oe={key:3,class:"flex gap-4 uppercase"},Pe={__name:"Navbar",setup(o){var s;const a=(s=y().props.auth)==null?void 0:s.user,t=g(!1);return(r,l)=>(n(),d("div",qe,[e("div",Te,[p(h(w),{class:"",href:r.route("home"),title:"Blinest"},{default:k(()=>[p(D,{class:"fill-inherit w-24 lg:w-32"})]),_:1},8,["href"]),p(N,{class:"mt-1 hidden lg:block"}),e("div",Le,[e("button",{type:"button",onClick:l[0]||(l[0]=_=>t.value=!t.value),class:"lg:hidden"},[p(A,{name:"search",class:"h-5 w-5 mr-4"})]),h(a)?(n(),f(h(w),{key:0,href:r.route("rankings.index"),title:r.__("Rankings")},{default:k(()=>[p(A,{name:"podium",class:"h-5 w-5 mr-4"})]),_:1},8,["href","title"])):c("",!0),e("a",{href:"https://discord.com/invite/uKyVgcxcFa",target:"_blank",title:r.__("Join the Blinest community on Discord"),class:"mr-4 umami--click--discord-button"},[p(z,{name:"discord",class:"h-5 w-5"})],8,De),h(a)?(n(),f(Be,{key:1,class:"mr-4"})):c("",!0),p(O,{class:"mr-4"}),h(a)?(n(),f(E,{key:2})):c("",!0),h(a)?c("",!0):(n(),d("div",Oe,[p(h(w),{href:r.route("login"),title:r.__("Login")},{default:k(()=>[v(i(r.__("Login")),1)]),_:1},8,["href","title"]),p(h(w),{href:r.route("register"),class:"hidden lg:block",title:r.__("Register")},{default:k(()=>[v(i(r.__("Register")),1)]),_:1},8,["href","title"])]))])]),e("div",null,[M(p(N,{class:"m-2"},null,512),[[L,t.value]])])]))}};export{Pe as _};
