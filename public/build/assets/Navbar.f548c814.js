import{q as k,e as g,k as b,x as y,o as a,b as l,d as _,u,n as w,a as e,t as r,g as d,h as v,j as $,l as x,c as p,w as h,F as j,y as C,L as f}from"./app.2ccf841f.js";import{L as N,a as A,_ as R}from"./LanguageSwitcher.cb537353.js";import{_ as V}from"./Icon.6689216d.js";import{_ as L}from"./TextInput.c49deda3.js";import{t as B,p as q}from"./pickBy.83d2d581.js";import{_ as T}from"./Dropdown.6ea7b926.js";import{S as M}from"./SocialIcon.895ec767.js";const S={__name:"SearchRooms",props:{filters:Object},setup(i){var s,t;const o=k({search:(t=(s=g().props.value)==null?void 0:s.filters)==null?void 0:t.search});return b(o,B(()=>{y.Inertia.get("/",q(o),{remember:"forget",preserveState:!0})},150),{deep:!0}),(n,m)=>(a(),l("div",{class:w(n.$attrs.class)},[_(L,{class:"text-sm",modelValue:u(o).search,"onUpdate:modelValue":m[0]||(m[0]=c=>u(o).search=c),"prepend-icon":"search",placeholder:n.__("Search")+"..."},null,8,["modelValue","placeholder"])],2))}},F={key:0},O={class:"mb-1 border-b pb-1 uppercase text-neutral-500"},D={class:"my-2 text-sm font-medium"},I={__name:"NewTeamRequest",props:{notification:Object},setup(i){const o=i,s=k({notification_id:o.notification.id}),t=m=>{s.post(`/teams/requests/${o.notification.data.teamRequest.id}/decline`)},n=m=>{s.post(`/teams/requests/${o.notification.data.teamRequest.id}/accept`)};return(m,c)=>i.notification?(a(),l("div",F,[e("h4",O,r(m.__("Team")),1),e("div",D,r(i.notification.data.message),1),e("div",{class:"mt-1 flex items-center justify-end"},[e("button",{onClick:t,class:"btn-danger btn-sm mr-2 opacity-80"},"Decline"),e("button",{onClick:n,class:"btn-primary btn-sm opacity-80"},"Accept")])])):d("",!0)}},E={key:0},H={class:"mb-1 border-b pb-1 uppercase text-neutral-500"},U={class:"my-2 text-sm font-medium"},z=e("br",null,null,-1),J={class:"mt-1 flex items-center justify-end"},K={__name:"TeamRequestApproved",props:{notification:Object},setup(i){const o=i,s=t=>{y.Inertia.post(`/users/notifications/${o.notification.id}/read`)};return(t,n)=>i.notification?(a(),l("div",E,[e("h4",H,r(t.__("Team"))+" "+r(i.notification.data.team.name),1),e("div",U,[v(r(t.__("Ta demande a \xE9t\xE9 accept\xE9e!")),1),z]),e("div",J,[e("button",{onClick:s,class:"btn-primary btn-sm opacity-80"},r(t.__("Mark as read")),1)])])):d("",!0)}},P={key:0},W={class:"flex justify-between items-center mb-1 border-b pb-1"},G={class:"uppercase text-red-500 flex items-center font-bold"},Q=e("svg",{xmlns:"http://www.w3.org/2000/svg",class:"h-4 w-4 mr-2",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor","stroke-width":"2"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M15 17h5l-1.405-1.405A2.032 2.032 0 0118 14.158V11a6.002 6.002 0 00-4-5.659V5a2 2 0 10-4 0v.341C7.67 6.165 6 8.388 6 11v3.159c0 .538-.214 1.055-.595 1.436L4 17h5m6 0v1a3 3 0 11-6 0v-1m6 0H9"})],-1),X={class:"text-xs text-neutral-400"},Y={class:"my-2 text-sm font-medium"},Z={__name:"NewRoomAlert",props:{notification:Object},setup(i){return k({notification_id:i.notification.id}),(s,t)=>i.notification?(a(),l("div",P,[e("div",W,[e("h4",G,[Q,v(" "+r(s.__("Alerte mod\xE9ration")),1)]),e("span",X,r(i.notification.data.created_at),1)]),e("div",Y,r(i.notification.data.message),1)])):d("",!0)}},ee={class:"relative"},te={key:0,class:"absolute -top-2 -right-2 flex h-4 w-4 items-center justify-center truncate rounded-full bg-red-500 p-1 text-xs"},se=e("svg",{xmlns:"http://www.w3.org/2000/svg",class:"h-4 w-4",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor","stroke-width":"2"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M15 17h5l-1.405-1.405A2.032 2.032 0 0118 14.158V11a6.002 6.002 0 00-4-5.659V5a2 2 0 10-4 0v.341C7.67 6.165 6 8.388 6 11v3.159c0 .538-.214 1.055-.595 1.436L4 17h5m6 0v1a3 3 0 11-6 0v-1m6 0H9"})],-1),oe={class:"p-2 font-light"},ae={key:0},ie={class:"justify-end"},ne=["onClick"],re=e("svg",{xmlns:"http://www.w3.org/2000/svg",class:"h-4 w-4",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor","stroke-width":"2"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M6 18L18 6M6 6l12 12"})],-1),ce=[re],le={key:1},de={__name:"Notifications",setup(i){const o=g().props.value.auth.user,s=$(o.notifications);x(()=>{Echo.private("App.Models.User."+o.id).notification(n=>{s.value.push(n),console.log(s.value)})});const t=n=>{axios.post(`/users/notifications/${n.id}/read`).then(()=>{console.log("tesdd"),s.value=s.value.filter(m=>m.id!==n.id)})};return(n,m)=>(a(),p(T,{placement:"bottom-end",autoClose:!1},{default:h(()=>[e("div",ee,[s.value.length?(a(),l("div",te,r(s.value.length),1)):d("",!0),se])]),dropdown:h(()=>[e("div",oe,[s.value.length?(a(),l("ul",ae,[(a(!0),l(j,null,C(s.value,c=>(a(),l("li",{key:c.id,class:"my-2 rounded bg-neutral-700 p-2 flex"},[c.type==="App\\Notifications\\NewTeamRequest"?(a(),p(I,{key:0,notification:c},null,8,["notification"])):d("",!0),c.type==="App\\Notifications\\TeamRequestApproved"?(a(),p(K,{key:1,notification:c},null,8,["notification"])):d("",!0),c.type==="App\\Notifications\\NewRoomAlert"?(a(),p(Z,{key:2,notification:c},null,8,["notification"])):d("",!0),e("div",ie,[e("button",{onClick:fe=>t(c),class:"pl-4 text-neutral-400"},ce,8,ne)])]))),128))])):(a(),l("span",le,r(n.__("No notification")),1))])]),_:1}))}},ue={class:"md:flex md:flex-shrink-0"},me={class:"flex w-full items-center justify-between px-4 py-2 md:flex-shrink-0 md:px-12"},_e={class:"flex items-center justify-end"},pe=["title"],he={key:3,class:"flex gap-4 uppercase"},xe={__name:"Navbar",setup(i){var s;const o=(s=g().props.value.auth)==null?void 0:s.user;return(t,n)=>(a(),l("div",ue,[e("div",me,[_(u(f),{class:"mt-1",href:t.route("home"),title:"Blinest"},{default:h(()=>[_(N,{class:"fill-white",width:"120",height:"28"})]),_:1},8,["href"]),_(S,{class:"mt-1 hidden md:flex"}),e("div",_e,[u(o)?(a(),p(u(f),{key:0,href:t.route("rankings.index"),title:t.__("Rankings")},{default:h(()=>[_(V,{name:"podium",class:"h-4 W-4"})]),_:1},8,["href","title"])):d("",!0),e("a",{href:"https://discord.com/invite/uKyVgcxcFa",target:"_blank",title:t.__("Join the Blinest community on Discord"),class:"mr-4"},[_(M,{name:"discord",class:"h-5 w-5"})],8,pe),u(o)?(a(),p(de,{key:1,class:"mr-4"})):d("",!0),_(A,{class:"mr-4"}),u(o)?(a(),p(R,{key:2})):d("",!0),u(o)?d("",!0):(a(),l("div",he,[_(u(f),{href:t.route("login"),title:t.__("Login")},{default:h(()=>[v(r(t.__("Login")),1)]),_:1},8,["href","title"]),_(u(f),{href:t.route("register"),title:t.__("Register")},{default:h(()=>[v(r(t.__("Register")),1)]),_:1},8,["href","title"])]))])])]))}};export{xe as _};
