import{k as s,q as M,l as j,o as n,h as B,w as b,b as e,I as T,Z as C,J as E,L as $,c,f as w,d as x,t as h,g as y,a as N,e as U,F as k,v as H}from"./app-f6824ecf.js";import{_ as I}from"./Dropdown-b8d92112.js";const L=e("div",{class:"group flex cursor-pointer select-none items-center h-full mr-1"},[e("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24","stroke-width":"1.5",stroke:"currentColor",class:"h-6 w-6"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M19.114 5.636a9 9 0 010 12.728M16.463 8.288a5.25 5.25 0 010 7.424M6.75 8.25l4.72-4.72a.75.75 0 011.28.53v15.88a.75.75 0 01-1.28.53l-4.72-4.72H4.51c-.88 0-1.704-.507-1.938-1.354A9.01 9.01 0 012.25 12c0-.83.112-1.633.322-2.396C2.806 8.756 3.63 8.25 4.51 8.25H6.75z"})])],-1),D={class:"p-2"},q={__name:"Volume",setup(f){const l=s(.7);M(()=>{l.value=localStorage.getItem("volume")??.7,d()}),j(l,r=>{localStorage.setItem("volume",r),d()});const d=()=>{window.dispatchEvent(new CustomEvent("volume-localstorage-changed",{detail:{volume:l.value}}))};return(r,i)=>(n(),B(I,{placement:"bottom-end",autoClose:!1},{default:b(()=>[L]),dropdown:b(()=>[e("div",D,[T(e("input",{id:"default-range",type:"range",min:"0",max:"1",step:"0.01","onUpdate:modelValue":i[0]||(i[0]=a=>l.value=a),class:"h-2 w-full cursor-pointer appearance-none rounded-lg"},null,512),[[C,l.value]])])]),_:1}))}},z=["onSubmit"],A={class:"relative flex w-full items-center"},F=["readonly"],O={type:"submit",class:"btn-send h-14"},J={xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24","stroke-width":"4",stroke:"currentColor",class:"w-6 h-6"},P=e("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M4.5 12.75l6 6 9-13.5"},null,-1),Z={class:"mt-2 flex gap-2"},G=["innerHTML"],K={inheritAttrs:!1},W=Object.assign(K,{__name:"UserInput",props:{room:Object,channel:String,currentTime:Number},setup(f){const l=f,d=s(null),r=s(null),i=s(null),a=s(""),p=s([]),o=s(null),v=s([]);E().props.auth.user;const m=s(!0);M(()=>{g(),Echo.channel(l.channel).listen("TrackPlayed",t=>{l.room.value=t.room,i.value=t.round,r.value=t.track,v.value=[],m.value=!1,a.value=""}).listen("TrackEnded",t=>{m.value=!0,a.value="",p.value=[]})}),$(()=>{Echo.leave(l.channel)});const g=()=>{d.value.focus()},S=()=>{a.value.length>=1&&r.value&&axios.post(`/rounds/${i.value.id}/tracks/${r.value.id}/check`,{text:a.value,words:p.value,currentTime:l.currentTime}).then(t=>{v.value.push(...t.data.good_answers),p.value=t.data.words,V(t.data.message),g()}),a.value=""},V=t=>{o.value=t,setTimeout(()=>{o.value=null},1500)};return(t,_)=>(n(),c(k,null,[e("form",{class:"flex w-full items-center justify-center",onSubmit:U(S,["prevent"])},[e("div",A,[o.value?(n(),c("blockquote",{key:0,class:w(["absolute bottom-full right-0 flex translate-y-[-80%] translate-x-[-50%] items-center rounded-lg bg-teal-600 py-1 px-2 text-neutral-100",{"bg-teal-600":o.value.type==="good","bg-orange-600":o.value.type==="almost","bg-red-600":o.value.type==="bad"}])},[x(h(o.value.body)+" ",1),e("div",{class:w(["absolute left-5 top-full h-full h-0 w-full w-0 translate-y-[-50%] border-t-[10px] mt-1 border-l-[10px] border-r-[10px] border-t-transparent border-l-transparent border-r-transparent",{"border-t-teal-600":o.value.type==="good","border-t-orange-600":o.value.type==="almost","border-t-red-600":o.value.type==="bad"}])},null,2)],2)):y("",!0),T(e("input",{ref_key:"input",ref:d,"onUpdate:modelValue":_[0]||(_[0]=u=>a.value=u),type:"text",class:"h-14 w-full flex-grow rounded-none rounded-bl-md border-none p-2 text-2xl uppercase text-gray-600 focus:shadow-none focus:outline-none focus:ring-0 border-none",placeholder:"Une idÃ©e?",autofocus:"",readonly:m.value},null,8,F),[[C,a.value]]),N(q,{class:"flex items-center justify-center p-2 h-14 text-neutral-700 bg-white -ml-1"}),e("button",O,[(n(),c("svg",J,[e("title",null,h(t.__("Send")),1),P]))])])],40,z),e("ul",Z,[(n(!0),c(k,null,H(v.value,u=>(n(),c("li",{key:u.id,class:"flex items-center rounded-lg bg-teal-600 py-1 px-2 text-neutral-100"},[u.type.svg_icon?(n(),c("span",{key:0,class:"mr-1",innerHTML:u.type.svg_icon},null,8,G)):y("",!0),x(" "+h(u.value),1)]))),128))])],64))}});export{W as default};
