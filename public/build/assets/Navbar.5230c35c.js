import{q as h,h as y,x as k,o as n,b as l,d as u,u as _,n as x,a as e,t as c,k as m,m as b,e as w,g,i as $,c as p,w as f,F as j,y as C,L as v}from"./app.e47e5905.js";import{L as N}from"./Logo.f4483971.js";import{_ as A}from"./Icon.b99ae8d7.js";import{_ as R}from"./TextInput.a612d17f.js";import{t as V,p as L}from"./pickBy.615c9b24.js";import{L as q,_ as B}from"./LanguageSwitcher.004676ec.js";import{_ as T}from"./Dropdown.c59b2b1e.js";const M={__name:"SearchRooms",props:{filters:Object},setup(s){var a;const o=s,t=h({search:(a=o==null?void 0:o.filters)==null?void 0:a.search});return y(t,V(()=>{k.Inertia.get("/",L(t),{remember:"forget",preserveState:!0})},150),{deep:!0}),(i,d)=>(n(),l("div",{class:x(i.$attrs.class)},[u(R,{class:"text-sm",modelValue:_(t).search,"onUpdate:modelValue":d[0]||(d[0]=r=>_(t).search=r),"prepend-icon":"search",placeholder:i.__("Search")+"..."},null,8,["modelValue","placeholder"])],2))}},S={key:0},O={class:"mb-1 border-b pb-1 uppercase text-neutral-500"},F={class:"my-2 text-sm font-medium"},D={__name:"NewTeamRequest",props:{notification:Object},setup(s){const o=s,t=h({notification_id:o.notification.id}),a=d=>{t.post(`/teams/requests/${o.notification.data.teamRequest.id}/decline`)},i=d=>{t.post(`/teams/requests/${o.notification.data.teamRequest.id}/accept`)};return(d,r)=>s.notification?(n(),l("div",S,[e("h4",O,c(d.__("Team")),1),e("div",F,c(s.notification.data.message),1),e("div",{class:"mt-1 flex items-center justify-end"},[e("button",{onClick:a,class:"btn-danger btn-sm mr-2 opacity-80"},"Decline"),e("button",{onClick:i,class:"btn-primary btn-sm opacity-80"},"Accept")])])):m("",!0)}},E={key:0},H={class:"mb-1 border-b pb-1 uppercase text-neutral-500"},I={class:"my-2 text-sm font-medium"},U=e("br",null,null,-1),z={class:"mt-1 flex items-center justify-end"},P={__name:"TeamRequestApproved",props:{notification:Object},setup(s){const o=s,t=a=>{k.Inertia.post(`/users/notifications/${o.notification.id}/read`)};return(a,i)=>s.notification?(n(),l("div",E,[e("h4",H,c(a.__("Team"))+" "+c(s.notification.data.team.name),1),e("div",I,[b(c(a.__("Ta demande a \xE9t\xE9 accept\xE9e!")),1),U]),e("div",z,[e("button",{onClick:t,class:"btn-primary btn-sm opacity-80"},c(a.__("Mark as read")),1)])])):m("",!0)}},W={key:0},G={class:"flex justify-between items-center mb-1 border-b pb-1"},J={class:"uppercase text-red-500 flex items-center font-bold"},K=e("svg",{xmlns:"http://www.w3.org/2000/svg",class:"h-4 w-4 mr-2",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor","stroke-width":"2"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M15 17h5l-1.405-1.405A2.032 2.032 0 0118 14.158V11a6.002 6.002 0 00-4-5.659V5a2 2 0 10-4 0v.341C7.67 6.165 6 8.388 6 11v3.159c0 .538-.214 1.055-.595 1.436L4 17h5m6 0v1a3 3 0 11-6 0v-1m6 0H9"})],-1),Q={class:"text-xs text-neutral-400"},X={class:"my-2 text-sm font-medium"},Y={__name:"NewRoomAlert",props:{notification:Object},setup(s){return h({notification_id:s.notification.id}),(t,a)=>s.notification?(n(),l("div",W,[e("div",G,[e("h4",J,[K,b(" "+c(t.__("Alerte mod\xE9ration")),1)]),e("span",Q,c(s.notification.data.created_at),1)]),e("div",X,c(s.notification.data.message),1)])):m("",!0)}},Z={class:"relative"},ee={key:0,class:"absolute -top-2 -right-2 flex h-4 w-4 items-center justify-center truncate rounded-full bg-red-500 p-1 text-xs"},te=e("svg",{xmlns:"http://www.w3.org/2000/svg",class:"h-4 w-4",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor","stroke-width":"2"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M15 17h5l-1.405-1.405A2.032 2.032 0 0118 14.158V11a6.002 6.002 0 00-4-5.659V5a2 2 0 10-4 0v.341C7.67 6.165 6 8.388 6 11v3.159c0 .538-.214 1.055-.595 1.436L4 17h5m6 0v1a3 3 0 11-6 0v-1m6 0H9"})],-1),se={class:"p-2 font-light"},oe={key:0},ae={class:"justify-end"},ne=["onClick"],ie=e("svg",{xmlns:"http://www.w3.org/2000/svg",class:"h-4 w-4",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor","stroke-width":"2"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M6 18L18 6M6 6l12 12"})],-1),re=[ie],ce={key:1},le={__name:"Notifications",setup(s){const o=w().props.value.auth.user,t=g(o.notifications);$(()=>{Echo.private("App.Models.User."+o.id).notification(i=>{t.value.push(i),console.log(t.value)})});const a=i=>{axios.post(`/users/notifications/${i.id}/read`).then(()=>{console.log("tesdd"),t.value=t.value.filter(d=>d.id!==i.id)})};return(i,d)=>(n(),p(T,{placement:"bottom-end",autoClose:!1},{default:f(()=>[e("div",Z,[t.value.length?(n(),l("div",ee,c(t.value.length),1)):m("",!0),te])]),dropdown:f(()=>[e("div",se,[t.value.length?(n(),l("ul",oe,[(n(!0),l(j,null,C(t.value,r=>(n(),l("li",{key:r.id,class:"my-2 rounded bg-neutral-700 p-2 flex"},[r.type==="App\\Notifications\\NewTeamRequest"?(n(),p(D,{key:0,notification:r},null,8,["notification"])):m("",!0),r.type==="App\\Notifications\\TeamRequestApproved"?(n(),p(P,{key:1,notification:r},null,8,["notification"])):m("",!0),r.type==="App\\Notifications\\NewRoomAlert"?(n(),p(Y,{key:2,notification:r},null,8,["notification"])):m("",!0),e("div",ae,[e("button",{onClick:_e=>a(r),class:"pl-4 text-neutral-400"},re,8,ne)])]))),128))])):(n(),l("span",ce,c(i.__("No notification")),1))])]),_:1}))}},de={class:"md:flex md:flex-shrink-0"},me={class:"flex w-full items-center justify-between px-4 py-2 md:flex-shrink-0 md:px-12"},ue={class:"flex items-center justify-end"},ye={__name:"Navbar",setup(s){var t;const o=(t=w().props.value.auth)==null?void 0:t.user;return(a,i)=>(n(),l("div",de,[e("div",me,[u(_(v),{class:"mt-1",href:a.route("home")},{default:f(()=>[u(N,{class:"fill-white",width:"120",height:"28"})]),_:1},8,["href"]),u(M,{class:"mt-1 hidden md:flex"}),e("div",ue,[u(_(v),{href:a.route("rankings.index"),title:a.__("Rankings")},{default:f(()=>[u(A,{name:"podium",class:"h-4 W-4"})]),_:1},8,["href","title"]),_(o)?(n(),p(le,{key:0,class:"mr-4"})):m("",!0),u(q,{class:"mr-4"}),_(o)?(n(),p(B,{key:1})):m("",!0)])])]))}};export{ye as _};
